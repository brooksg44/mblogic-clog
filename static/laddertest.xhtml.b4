<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html 
      PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" 
		xmlns:svg="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink">

<head>
<link rel="icon" type="image/png" href="/systemicon.png" />
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<!-- Version 08-Jan-2009 -->

<!-- General page layout style sheet. -->
<link rel="stylesheet" href="css/laddereditor.css" type="text/css"></link>

<title>Ladder Editor Demo</title>

<!-- Ladder editing library to handle a single rung. -->
<script type="text/javascript" src="js/ladeditlib.js"></script>
<!-- Displaying the entire subroutine. -->
<script type="text/javascript" src="js/ladsubrdisplib.js"></script>
<!-- Ladder symbols. -->
<script type="text/javascript" src="js/ladsymbols.js"></script>
<!-- Subroutine editing. -->
<script type="text/javascript" src="js/ladsubreditlib.js"></script>
<!-- Subroutine data control. -->
<script type="text/javascript" src="js/ladsubrdata.js"></script>

<!-- Load ladder data from API (replaces static demodata.js) -->
<script type="text/javascript">
//<![CDATA[
var rungdata = null;

// Get URL parameter
function getUrlParam(name) {
    var params = new URLSearchParams(window.location.search);
    return params.get(name);
}

// Fetch ladder data from API
function loadLadderData(subrname) {
    var url = '/api/ladder-js?subrname=' + encodeURIComponent(subrname || 'main');
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, false);  // Synchronous for simplicity
    xhr.send();
    if (xhr.status === 200) {
        rungdata = JSON.parse(xhr.responseText);
    } else {
        console.error('Failed to load ladder data:', xhr.status);
        rungdata = {subroutinename: 'Error', subrcomments: 'Failed to load', signature: 0, rungdata: []};
    }
}

// Load subroutine from URL parameter or default to 'main'
var currentSubrname = getUrlParam('subrname') || 'LadderDemo';
loadLadderData(currentSubrname);

// Function to change subroutine
function changeSubroutine() {
    var select = document.getElementById('subrSelect');
    var subrname = select.value;
    window.location.href = '?subrname=' + encodeURIComponent(subrname);
}

// Fetch available subroutines
function loadSubroutineList() {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', '/api/subroutines', false);
    xhr.send();
    if (xhr.status === 200) {
        var subroutines = JSON.parse(xhr.responseText).subroutines || [];
        var select = document.getElementById('subrSelect');
        if (select) {
            // Clear existing options first
            select.innerHTML = '';
            subroutines.forEach(function(name) {
                var option = document.createElement('option');
                option.value = name;
                option.text = name;
                if (name === currentSubrname) {
                    option.selected = true;
                }
                select.appendChild(option);
            });
        }
    }
}

// Initialize page and display ladder
function MBEdit_pageinit() {
    // Initialize global symbol definitions (must happen after all scripts load)
    try {
        if (!window.LadSymbols) {
            console.log('Initializing LadSymDefs...');
            console.log('LadSymDefs constructor:', typeof LadSymDefs);
            
            var ladsymdefsinstance = new LadSymDefs(document);
            console.log('LadSymDefs instance created:', typeof ladsymdefsinstance);
            console.log('instance.LadSymbols type:', typeof ladsymdefsinstance.LadSymbols);
            console.log('instance.LadSymbols keys:', Object.keys(ladsymdefsinstance.LadSymbols || {}).length);

            // Store the full ladsymbols instance for use by LadderEditor
            window.LadSymbolsInstance = ladsymdefsinstance;
            window.LadSymbols = ladsymdefsinstance.LadSymbols;
            window.MatrixParams = ladsymdefsinstance.MatrixParams;
            window.RungHeightPad = ladsymdefsinstance.RungHeightPad;
            
            console.log('window.LadSymbols assigned:', typeof window.LadSymbols);
            console.log('LadSymbols initialized successfully');
            console.log('Available symbols:', Object.keys(window.LadSymbols || {}).length);
            console.log('Sample symbols:', Object.keys(window.LadSymbols || {}).slice(0, 5).join(', '));
        } else {
            console.log('window.LadSymbols already initialized, symbols:', Object.keys(window.LadSymbols).length);
        }
    } catch (e) {
        console.error('Error initializing LadSymbols:', e.message);
        console.error('Stack:', e.stack);
        console.error('LadSymDefs available:', typeof LadSymDefs);
        return;
    }
    
    if (!rungdata || !rungdata.rungdata) {
        console.error('No rungdata available');
        return;
    }
    
    // Update subroutine name and comments
    var subrNameElem = document.getElementById('subroutinename');
    if (subrNameElem) {
        subrNameElem.textContent = rungdata.subroutinename || 'Unknown';
    }
    
    var subrCommentElem = document.getElementById('subrcomments');
    if (subrCommentElem) {
        subrCommentElem.textContent = rungdata.subrcomments || '';
    }
    
    // Create ladder display
    var rungList = document.getElementById('staticrunglist');
    console.log('staticrunglist element found:', rungList ? 'YES' : 'NO');
    console.log('window.SubrDispControl available:', window.SubrDispControl ? 'YES' : 'NO');
    
    if (rungList && window.SubrDispControl) {
        try {
            // Get all required elements
            var svgcontainer = document.getElementById('svgcontainer');
            var laddercontainer = document.getElementById('laddercontainer');
            var svginprail = document.getElementById('svginprail');
            var svginprail2 = document.getElementById('svginprail2');
            var svginprail3 = document.getElementById('svginprail3');
            var svgoutprail = document.getElementById('svgoutprail');
            var svgoutpraildec = document.getElementById('svgoutpraildec');
            
            console.log('=== SVG Elements Check ===');
            console.log('svgcontainer:', svgcontainer ? 'found (' + svgcontainer.tagName + ')' : 'NOT FOUND');
            console.log('laddercontainer:', laddercontainer ? 'found (' + laddercontainer.tagName + ')' : 'NOT FOUND');
            console.log('svginprail:', svginprail ? 'found (' + svginprail.tagName + ')' : 'NOT FOUND');
            console.log('svgoutprail:', svgoutprail ? 'found (' + svgoutprail.tagName + ')' : 'NOT FOUND');
            
            if (!svgcontainer || !laddercontainer || !svginprail) {
                console.error('CRITICAL: Missing required SVG template elements!');
                return;
            }
            
            // Note: dispControl is now created in InitializeEditingController (called at end of this function)
            // We store references to the SVG elements in window for use by that function
            window.svgElements = {
                svgcontainer: svgcontainer,
                laddercontainer: laddercontainer,
                staticladderlist: rungList,
                svginprail: svginprail,
                svginprail2: svginprail2,
                svginprail3: svginprail3,
                svgoutprail: svgoutprail,
                svgoutpraildec: svgoutpraildec
            };
            
            // Display each rung
            console.log('Starting rung rendering...');
            console.log('rungdata.rungdata type:', typeof rungdata.rungdata);
            console.log('Is array:', Array.isArray(rungdata.rungdata));
            console.log('rungdata.rungdata length:', rungdata.rungdata ? rungdata.rungdata.length : 'N/A');
            
            // Note: Rung rendering is now done in InitializeEditingController using the properly initialized SubrControl
            console.log('Ladder data loaded, rungs will be rendered by InitializeEditingController')
         } catch (e) {
             console.error('Error initializing ladder display:', e);
         }
         
         // Now initialize the editing controller (which relies on window.LadSymbols)
         InitializeEditingController();
     }
 }
//]]>
</script>

</head>

<body onload="MBEdit_pageinit(); loadSubroutineList();">


<div id="filler">


	<!-- ################################################################## -->

	<div id="datadisplay">
	<h1>Ladder Editor Demo</h1>
	
	<!-- Subroutine selector -->
	<div style="margin: 10px 0;">
		<label for="subrSelect">Select Subroutine: </label>
		<select id="subrSelect" onchange="changeSubroutine();" style="font-size: 14px; padding: 4px;">
			<option value="main">main</option>
		</select>
	</div>
	
	<hr></hr>
	
		<!-- ################################################################ -->

		<div onclick="SubrEdit.SubrCommentEdit();">
			<!-- Subroutine name. -->
			<p id="subroutinename" class="subheaderarea"></p>
			<!-- Subroutine comments. -->
			<p id="subrcomments" class="commentarea"></p>
		</div>


 		<!-- Edit the subroutine comments. -->
		<div id="subrcommentedit" class="runghide">
			<form name="subrcommentedit" >
				 <input class="editcommentfields" type="text" 
				 				name="subrcommenttext" size="80" />
			</form>
			<button class="editcommentfields"
						onclick="SubrCommentEnter();">Change</button>
		</div>

		<!-- This clears the floating layout in the editing. -->
		<div class="editcommentdone"></div>


		<!-- The list of rungs which get added automatically. -->
		<div id="staticrunglist" class="rungshow">
		</div>

		<!-- Command button to append a rung. -->
		<div class="subrcommandarea">
			<p>
			<button onclick="RungAppend();">Append Rung</button>
			</p>
		</div>


		<!-- ################################################################ -->
		
	</div>

</div>

	<!-- ################################################################ -->

<!-- This div holds all the ladder prototypes so we can control the visibility
	of them. -->
<div id="ladderprototypes">

	<!-- ################################################################ -->
<!-- This is the original rung edit SVG. -->

<div id="instrbuttonstorage">



<!-- This is a container for holding the SVG for edit buttons. -->
<svg id="buttonssvg" xmlns="http://www.w3.org/2000/svg" 
     xmlns:html="http://www.w3.org/1999/xhtml"
     version="1.1" baseProfile="full" width="1000px" height="140px">

	<!-- Edit button definitions. -->
	<defs id="MB_Defs">

		<!-- The following filter is used to add a drop shadown. -->
		<filter id="MB_DropShadowFilter">
			<feGaussianBlur stdDeviation="2">
			</feGaussianBlur>
		</filter>

		<!-- Blue gradients. -->
		<linearGradient id="MB_InsBelowColour" x1="1" y1="1" x2="0" y2="0px">
			<stop offset="50%" stop-color="blue" />
			<stop offset="100%" stop-color="white" />
		</linearGradient>

		<!-- Green Gradients. -->
		<linearGradient id="MB_InsLeftColour" x1="1" y1="1" x2="0" y2="0px">
			<stop offset="50%" stop-color="green" />
			<stop offset="100%" stop-color="white" />
		</linearGradient>

		<!-- Indigo gradients. -->
		<linearGradient id="MB_InsRightColour" x1="1" y1="1" x2="0" y2="0px">
			<stop offset="50%" stop-color="indigo" />
			<stop offset="100%" stop-color="white" />
		</linearGradient>

		<!-- Orange gradients. -->
		<linearGradient id="MB_ReplaceColour" x1="1" y1="1" x2="0" y2="0px">
			<stop offset="50%" stop-color="orange" />
			<stop offset="100%" stop-color="white" />
		</linearGradient>

		<!-- Gradient for outputs which require several rung levels of input. -->
		<linearGradient id="MB_OutputMultiColour" x1="1" y1="1" x2="0" y2="0px">
			<stop offset="50%" stop-color="olive" />
			<stop offset="100%" stop-color="white" />
		</linearGradient>


		<!-- Yellow gradients. -->
		<linearGradient id="MB_MoreButtonColour" x1="1" y1="1" x2="0" y2="0px">
			<stop offset="50%" stop-color="yellow" />
			<stop offset="100%" stop-color="white" />
		</linearGradient>

		<!-- This is a single menu tab. -->
		<path id="MB_MenuTab"  
					d="M0,35 L0,30 
					C5,30 10,30 15,20 
					L20,10 
					C25,0 30,0 35,0
					L100,0
					C105,0 110,0 115,10 
					L120,20
					C125,30 130,30 135,30 
					L135,35  
					Z" />


		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<rect id="MB_InputButtonShadow" x="7" y="7px" width="150" height="120" 
			rx="15px" fill="grey" stroke="none" stroke-width="0px" 
			filter="url(#MB_DropShadowFilter)"/>

		<!-- Input button for replace instruction. -->
		<g id="MB_InputButtonReplace">
			<path fill="url(#MB_ReplaceColour)" 
				d="M5,5 L40,40 L40,80 L110,80 L110,40 L145,5 
				C145,0 136,0 136,0 L14,0  C14,0 5,0 5,5 Z" />
		</g> 

		<!-- Input button for replace to left. -->
		<g id="MB_InputButtonLeft">
			<path fill="url(#MB_InsLeftColour)" 
				d="M5,115 L40,80 L40,40 L5,5  C0,5 0,14 0,14 L0,106 C0,106 0,115 5,115  Z" />
			<path fill="white" d="M7,60 L25,45 L25,75 Z" />
		</g> 

		<!-- Input button for replace below. -->
		<g id="MB_InputButtonBelow">
			<path fill="url(#MB_InsBelowColour)" 
				d="M145,115 L110,80 L40,80 L5,115 C5,120 14,120 14,120 
					L136,120 C136,120 145,120 145,115 Z" />
			<path fill="white" d="M75,115 L60,95 L90,95 Z" /> 
		</g> 

		<!-- Input button for replace to right. -->
		<g id="MB_InputButtonRight">
			<path fill="url(#MB_InsRightColour)" 
				d="M145,115 L110,80 L110,40 L145,5 C150,5 150,14 150,14 L150,106 
					C150,106 150,115 145,115 Z" />  
			<path fill="white" d="M145,60 L127,45 L127,75 Z" /> 
		</g> 

		<!-- This is used for the drop shadown for narrow output buttons
				with down buttons. -->
		<g id="MB_OutputButtonNarrowShadow" filter="url(#MB_DropShadowFilter)"
				 fill="grey" stroke="none" stroke-width="0px">
			<rect x="7" y="7px" width="80px" height="80px" rx="15px" />
			<path transform="translate(7,7)"
				d="M5,85 L20,120 L60,120 L75,85 C75,80 66,80 66,80 L14,80 
						C14,80 5,80 5,85 Z" />
		</g>

		
		<!-- This is for narrow output replace below buttons. -->
		<g id="MB_OutputButtonNarrowDown" >
			<path fill="url(#MB_InsBelowColour)"  
				d="M5,85 L20,120 L60,120 L75,85 C75,80 66,80 66,80 L14,80 
						C14,80 5,80 5,85 Z" />
			<path fill="white" d="M40,115 L25,95 L55,95 Z" />
		</g>


		<!-- This is used for the drop shadown for narrow output buttons
				with down buttons. -->
		<g id="MB_OutputButtonNarrowShadow" filter="url(#MB_DropShadowFilter)"
				 fill="grey" stroke="none" stroke-width="0px">
			<rect x="7" y="7px" width="80px" height="80px" rx="15px" />
			<path transform="translate(7,7)"
				d="M5,85 L20,120 L60,120 L75,85 C75,80 66,80 66,80 L14,80 C14,80 5,80 5,85 Z" />
		</g>

		
		<!-- This is for narrow output replace below buttons. -->
		<g id="MB_OutputButtonNarrowDown" >
			<path fill="url(#MB_InsBelowColour)"  
				d="M5,85 L20,120 L60,120 L75,85 C75,80 66,80 66,80 L14,80 
						C14,80 5,80 5,85 Z" />
			<path fill="white" d="M40,115 L25,95 L55,95 Z" />
		</g>


		<!-- This is used for the drop shadown for wide output buttons
				with down buttons. -->
		<g id="MB_OutputButtonWideShadow" filter="url(#MB_DropShadowFilter)"
				 fill="grey" stroke="none" stroke-width="0px">
			<rect x="7" y="7px" width="120px" height="80px" rx="15px" />
			<path transform="translate(7,7)"
					d="M5,85 L20,120 L100,120 L115,85 C115,80 106,80 106,80 L14,80 
							C14,80 5,80 5,85 Z" />
		</g>

		<!-- This is for wide output replace below buttons. -->
		<g id="MB_OutputButtonWideDown" >
			<path fill="url(#MB_InsBelowColour)"  
				d="M5,85 L20,120 L100,120 L115,85 C115,80 106,80 106,80 L14,80 
						C14,80 5,80 5,85 Z" />
			<path fill="white" d="M60,115 L45,95 L75,95 Z" /> 
		</g>



	</defs>


<!-- ********************************************************************** -->

<g id="inputtabs" transform="translate(5,5)">
	<g class="buttontabs" transform="translate(300,0)" 
			onclick="LadEditor.ShowButtons('inputmatrixeditbuttons');" 
			fill="url(#MB_ReplaceColour)">
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px">EDIT</text>
	</g>

	<g class="buttontabs" transform="translate(200,0)" 
			onclick="LadEditor.ShowButtons('branchbuttons');" 
			fill="url(#MB_ReplaceColour)">
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px">BRANCH</text>
	</g>

	<g class="buttontabs" transform="translate(100,0)"
			onclick="LadEditor.ShowButtons('comparebuttons');" 
			fill="url(#MB_ReplaceColour)">
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px">COMP</text>
	</g>

	<g class="buttontabs" transform="translate(0,0)" 
			onclick="LadEditor.ShowButtons('inputbuttons');" 
			fill="url(#MB_ReplaceColour)" >
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px">BOOL</text>
	</g>

</g>



<!-- ********************************************************************** -->


<g id="outputtabs" transform="translate(5,5)">
	<g class="buttontabs" transform="translate(600,0)" 
			onclick="LadEditor.ShowButtons('outputmatrixeditbuttons');" 
			fill="url(#MB_ReplaceColour)">
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" >EDIT</text>
	</g>

	<g class="buttontabs" transform="translate(500,0)"  
			onclick="LadEditor.ShowButtons('miscbuttons');" 
			fill="url(#MB_ReplaceColour)">
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" >MISC</text>
	</g>

	<g class="buttontabs" transform="translate(400,0)"  
			onclick="LadEditor.ShowButtons('findbuttons');" 
			fill="url(#MB_ReplaceColour)">
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" >FIND</text>
	</g>

	<g class="buttontabs" transform="translate(300,0)"  
			onclick="LadEditor.ShowButtons('copydatabuttons');" 
			fill="url(#MB_ReplaceColour)">
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" >COPY</text>
	</g>

	<g class="buttontabs" transform="translate(200,0)"  
			onclick="LadEditor.ShowButtons('timercounterbuttons');" 
			fill="url(#MB_ReplaceColour)">
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" >TIMER</text>
	</g>

	<g class="buttontabs" transform="translate(100,0)" 
			onclick="LadEditor.ShowButtons('progcontrolbuttons');" 
			fill="url(#MB_ReplaceColour)">
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" >PROG</text>
	</g>

	<g class="buttontabs" transform="translate(0,0)" 
			onclick="LadEditor.ShowButtons('outputbuttons');" 
			fill="url(#MB_ReplaceColour)" >
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" >COIL</text>
	</g>

</g>


<!-- ###################################################################### -->

<g id="inputbuttons" >

	<!-- Show the tab. -->
	<g transform="translate(5,5)" fill="url(#MB_InsRightColour)" >
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" stroke="black" font-size="18" 
				stroke-width="2px" text-anchor="middle">BOOL</text>
	</g>

	<g  transform="translate(5,45) scale(0.5)">
	<!-- Add N0 contacts. -->
	<g transform="translate(0,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'noc');">
			<use xlink:href="#MB_InputButtonReplace"/>

			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,40)" stroke="black" stroke-width="3px">
				<line x1="10" y1="0px" x2="30px" y2="0px"/> 
				<line x1="45px" y1="0px" x2="65" y2="0px" /> 
				<line x1="30px" y1="-15px" x2="30px" y2="15px" />
				<line x1="45px" y1="-15px" x2="45px" y2="15px" /> 
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'noc');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'noc');">
			<use xlink:href="#MB_InputButtonBelow"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'noc');">
			<use xlink:href="#MB_InputButtonRight"/>
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add NC contacts. -->
	<g transform="translate(160,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'ncc');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,40)" stroke="black" stroke-width="3px">
				<line x1="10" y1="0px" x2="30px" y2="0px"/> 
				<line x1="45px" y1="0px" x2="65" y2="0px" /> 
				<line x1="30px" y1="-15px" x2="30px" y2="15px" />
				<line x1="45px" y1="-15px" x2="45px" y2="15px" /> 
				<line x1="20px" y1="12px" x2="55px" y2="-12px" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'ncc');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'ncc');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'ncc');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>


	<!-- ********************************************************************** -->

	<!-- Add rising edge contact. -->
	<g transform="translate(320,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'nocpd');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,40)" stroke="black" stroke-width="3px">
				<line x1="10" y1="0px" x2="30px" y2="0px"/> 
				<line x1="45px" y1="0px" x2="65" y2="0px" /> 
				<line x1="30px" y1="-15px" x2="30px" y2="15px" />
				<line x1="45px" y1="-15px" x2="45px" y2="15px" /> 

				<line x1="37" y1="-10" x2="37" y2="10" />
				<line x1="37" y1="-10" x2="32" y2="-5" />
				<line x1="37" y1="-10" x2="41" y2="-5" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'nocpd');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'nocpd');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'nocpd');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add falling edge contact. -->
	<g transform="translate(480,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'nocnd');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,40)" stroke="black" stroke-width="3px">
				<line x1="10" y1="0px" x2="30px" y2="0px"/> 
				<line x1="45px" y1="0px" x2="65" y2="0px" /> 
				<line x1="30px" y1="-15px" x2="30px" y2="15px" />
				<line x1="45px" y1="-15px" x2="45px" y2="15px" /> 

				<line x1="37" y1="-10" x2="37" y2="10" />
				<line x1="37" y1="10" x2="32" y2="5" />
				<line x1="37" y1="10" x2="41" y2="5" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'nocnd');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'nocnd');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'nocnd');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>


	<!-- ********************************************************************** -->

	</g>

</g> <!-- inputs -->


<!-- ###################################################################### -->

<g  id="comparebuttons" >


	<!-- Show the tab. -->
	<g transform="translate(105,5)" fill="url(#MB_InsRightColour)">
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" stroke="black" font-size="18" 
				stroke-width="2px" text-anchor="middle">COMP</text>
	</g>


	<g transform="translate(5,45) scale(0.5) " >
	<!-- Add compare for equal. -->
	<g transform="translate(0,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'compeq');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,40)" stroke="black" stroke-width="3px">
				<!-- Joining lines. -->		
				<line x1="0" y1="0" x2="25" y2="0" />
				<line x1="50" y1="0" x2="75" y2="0" />
			
				<!-- Contacts. -->		
				<line x1="25" y1="-15" x2="25" y2="15" />
				<line x1="50" y1="-15" x2="50" y2="15" />
	
				<!-- Symbol for Equals. -->		
				<line x1="30" y1="-4" x2="44" y2="-4" />
				<line x1="30" y1="4" x2="44" y2="4" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'compeq');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'compeq');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'compeq');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add compare for not equal. -->
	<g transform="translate(160,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'compneq');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,40)" stroke="black" stroke-width="3px">
				<!-- Joining lines. -->		
				<line x1="0" y1="0" x2="25" y2="0" />
				<line x1="50" y1="0" x2="75" y2="0" />
			
				<!-- Contacts. -->		
				<line x1="25" y1="-15" x2="25" y2="15" />
				<line x1="50" y1="-15" x2="50" y2="15" />
	
				<!-- Symbol for not equal. -->		
				<line x1="30" y1="-4" x2="44" y2="-4" />
				<line x1="30" y1="4" x2="44" y2="4" />
				<line x1="33" y1="10" x2="42" y2="-10" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'compneq');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'compneq');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'compneq');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add compare for greater than. -->
	<g transform="translate(320,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'compgt');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,40)" stroke="black" stroke-width="3px">
				<!-- Joining lines. -->		
				<line x1="0" y1="0" x2="25" y2="0" />
				<line x1="50" y1="0" x2="75" y2="0" />
			
				<!-- Contacts. -->		
				<line x1="25" y1="-15" x2="25" y2="15" />
				<line x1="50" y1="-15" x2="50" y2="15" />
	
				<!-- Symbol for greater than. -->		
				<line x1="30" y1="-5" x2="44" y2="0" />
				<line x1="30" y1="5" x2="44" y2="0" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'compgt');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'compgt');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'compgt');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add compare for less than. -->
	<g transform="translate(480,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'complt');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,40)" stroke="black" stroke-width="3px">
				<!-- Joining lines. -->		
				<line x1="0" y1="0" x2="25" y2="0" />
				<line x1="50" y1="0" x2="75" y2="0" />
			
				<!-- Contacts. -->		
				<line x1="25" y1="-15" x2="25" y2="15" />
				<line x1="50" y1="-15" x2="50" y2="15" />
	
				<!-- Symbol for less than. -->		
				<line x1="30" y1="0" x2="44" y2="-5" />
				<line x1="30" y1="0" x2="44" y2="5" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'complt');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'complt');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'complt');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add compare for greater than or equal to. -->
	<g transform="translate(640,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'compge');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,40)" stroke="black" stroke-width="3px">
				<!-- Joining lines. -->		
				<line x1="0" y1="0" x2="25" y2="0" />
				<line x1="50" y1="0" x2="75" y2="0" />
			
				<!-- Contacts. -->		
				<line x1="25" y1="-15" x2="25" y2="15" />
				<line x1="50" y1="-15" x2="50" y2="15" />
	
				<!-- Symbol for greater than or equal to. -->		
				<line x1="30" y1="-10" x2="44" y2="-5" />
				<line x1="30" y1="0" x2="44" y2="-5" />
				<line x1="30" y1="5" x2="44" y2="5" />
				<line x1="30" y1="10" x2="44" y2="10" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'compge');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'compge');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'compge');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add compare for less than or equal to. -->
	<g transform="translate(800,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'comple');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,40)" stroke="black" stroke-width="3px">
				<!-- Joining lines. -->		
				<line x1="0" y1="0" x2="25" y2="0" />
				<line x1="50" y1="0" x2="75" y2="0" />
			
				<!-- Contacts. -->		
				<line x1="25" y1="-15" x2="25" y2="15" />
				<line x1="50" y1="-15" x2="50" y2="15" />
	
				<!-- Symbol for less than or equal to. -->		
				<line x1="30" y1="-5" x2="44" y2="-10" />
				<line x1="30" y1="-5" x2="44" y2="0" />
				<line x1="30" y1="5" x2="44" y2="5" />
				<line x1="30" y1="10" x2="44" y2="10" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'comple');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'comple');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'comple');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>


	<!-- ********************************************************************** -->

	</g>

</g>	<!-- comparebuttons -->
<!-- ###################################################################### -->

<g id="branchbuttons" >

	<!-- Show the tab. -->
	<g transform="translate(205,5)" fill="url(#MB_InsRightColour)">
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" stroke="black" font-size="18" 
				stroke-width="2px" text-anchor="middle">BRANCH</text>
	</g>

	<g transform="translate(5,45) scale(0.5)">

	<!-- ********************************************************************** -->

	<!-- Add branch with "T" at top. -->
	<g transform="translate(0,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'brancht');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,25)" stroke="black" stroke-width="3px">
				<!-- This is the start (top) of a right branch. -->
			 	<line x1="0px" y1="0px" x2="75px" y2="0px" />
				<line x1="37px" y1="0px" x2="37px" y2="37px" />
				<circle cx="37px" cy="0px" r="3px" stroke-width="5px" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'brancht');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'brancht');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'brancht');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>



	<!-- ********************************************************************** -->

	<!-- Add branch continue left. -->
	<g transform="translate(160,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'branchl');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(20,70)" stroke="black" stroke-width="3px">
				<!-- This is a continuation of a left branch. -->
				<line x1="37px" y1="-65px" x2="37px" y2="0px" />
				<line x1="37px" y1="0px" x2="75px" y2="0px" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'branchl');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'branchl');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'branchl');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>



	<!-- ********************************************************************** -->

	<!-- Add branch continue right. -->
	<g transform="translate(320,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'branchr');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(50,70)" stroke="black" stroke-width="3px">
				<!-- This is a continuation of a right branch. -->
				<line x1="37px" y1="-65px" x2="37px" y2="0px" />
				<line x1="0px" y1="0px" x2="37px" y2="0px" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'branchr');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'branchr');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'branchr');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add vertical branch without a join. -->
	<g transform="translate(480,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'vbar');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,60)" stroke="black" stroke-width="3px">
				<!-- This is a vertical bar (branch). -->
				<line x1="37px" y1="-50px" x2="37px" y2="10px" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'vbar');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'vbar');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'vbar');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add horizontal branch without a join. -->
	<g transform="translate(640,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'hbar');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(50,40)" stroke="black" stroke-width="3px">
				<!-- This is a horizontal bar (branch). -->
				<line x1="0px" y1="0px" x2="45px" y2="0px" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'hbar');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'hbar');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'hbar');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add branch "T" with join to the right. -->
	<g transform="translate(800,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'branchtr');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,40)" stroke="black" stroke-width="3px">
				<!-- This is a right (branch). -->
				<line x1="37px" y1="-30px" x2="37px" y2="30px" />
				<line x1="37px" y1="0px" x2="65px" y2="0px" />
				<circle cx="37px" cy="0px" r="3px" stroke-width="5px" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'branchtr');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'branchtr');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'branchtr');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add branch "T" with join to the left. -->
	<g transform="translate(960,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'branchtl');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,40)" stroke="black" stroke-width="3px">
				<!-- This is a left (branch). -->
				<line x1="37px" y1="-30px" x2="37px" y2="30px" />
				<line x1="10px" y1="0px" x2="37px" y2="0px" />
				<circle cx="37px" cy="0px" r="3px" stroke-width="5px" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'branchtl');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'branchtl');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'branchtl');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>


	<!-- ********************************************************************** -->

	<!-- Add branch "T" with join pointing up. -->
	<g transform="translate(1120,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'branchtu');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,40)" stroke="black" stroke-width="3px">
				<!-- This is a left (branch). -->
				<line x1="37px" y1="-30px" x2="37px" y2="25px" />
				<line x1="10px" y1="25px" x2="64px" y2="25px" />
				<circle cx="37px" cy="25px" r="3px" stroke-width="5px" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'branchtu');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'branchtu');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'branchtu');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add branch cross over ("X"). -->
	<g transform="translate(1280,0) " >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_InputButtonShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddInput('replace', 'branchx');">
			<use xlink:href="#MB_InputButtonReplace"/>


			<!-- This is the ladder symbol.  -->
			<g transform="translate(37,40)" stroke="black" stroke-width="3px">
				<!-- This is a cross over branch. -->
				<line x1="37px" y1="-30px" x2="37px" y2="30px" />
				<line x1="10px" y1="0px" x2="65px" y2="0px" />
				<circle cx="37px" cy="0px" r="3px" stroke-width="5px" />
			</g>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('left', 'branchx');">
			<use xlink:href="#MB_InputButtonLeft"/>
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('below', 'branchx');">
			<use xlink:href="#MB_InputButtonBelow"/> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddInput('right', 'branchx');">
			<use xlink:href="#MB_InputButtonRight"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->
		<!-- Instruction masks. These mask off instructions which are not valid
			for the current rung type. -->
	 	<g transform="translate(-5,-5)" id="maskbranch" class="runghide">
			<rect x="0" y="0" width="1445" height="140" rx="15" 
				filter="url(#MB_DropShadowFilter)" fill="grey" opacity="0.75"/>
		</g>


	<!-- ********************************************************************** -->
	</g>

</g> <!-- branchbuttons -->

<!-- ###################################################################### -->

<g id="inputmatrixeditbuttons">
	<!-- ********************************************************************** -->


	<!-- Show the tab. -->
	<g transform="translate(305,5)" fill="url(#MB_InsRightColour)">
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" stroke="black" font-size="18" 
				stroke-width="2px" text-anchor="middle">EDIT</text>
	</g>


	<g transform="translate(5,45) scale(0.5) ">

	<!-- Insert an empty cell in the current input column. -->
	<g transform="translate(0,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<rect x="7" y="7px" width="150px" height="75px" rx="15px"  fill="grey" 
			stroke="none" stroke-width="0px" filter="url(#MB_DropShadowFilter)"/>

		<g class="buttonactivate" fill="url(#MB_MoreButtonColour)" 
				onclick="LadEditor.InsertInputCell();">
			<rect x="0px" y="0px" width="150px" height="75px" rx="15px" />
			<text x="75px" y="50px" font-size="24" stroke-width="3px" 
					text-anchor="middle">INS CELL</text> 
		</g>


	</g>

	<!-- ********************************************************************** -->

	<!-- Insert an entire (empty) row of inputs. -->
	<g transform="translate(160,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<rect x="7" y="7px" width="150px" height="75px" rx="15px"  fill="grey" 
			stroke="none" stroke-width="0px" filter="url(#MB_DropShadowFilter)"/>

		<g class="buttonactivate" fill="url(#MB_MoreButtonColour)" 
				onclick="LadEditor.InsertInputRow();">
			<rect x="0px" y="0px" width="150px" height="75px" rx="15px" />
			<text x="75px" y="50px" font-size="24" stroke-width="3px" 
					text-anchor="middle">INS ROW</text> 
		</g>


	</g>

	<!-- ********************************************************************** -->

	<!-- Insert an entire (empty) column of inputs. -->
	<g transform="translate(320,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<rect x="7" y="7px" width="150px" height="75px" rx="15px"  fill="grey" 
			stroke="none" stroke-width="0px" filter="url(#MB_DropShadowFilter)"/>

		<g class="buttonactivate" fill="url(#MB_MoreButtonColour)" 
				onclick="LadEditor.InsertInputCol();">
			<rect x="0px" y="0px" width="150px" height="75px" rx="15px" />
			<text x="75px" y="50px" font-size="24" stroke-width="3px" 
					text-anchor="middle">INS COL</text> 
		</g>


	</g>

	<!-- ********************************************************************** -->

	<!-- Delete a cell in the inputs amd move the rest of the column up. -->
	<g transform="translate(500,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<rect x="7" y="7px" width="150px" height="75px" rx="15px"  fill="grey" 
			stroke="none" stroke-width="0px" filter="url(#MB_DropShadowFilter)"/>

		<g class="buttonactivate" fill="url(#MB_MoreButtonColour)" 
				onclick="LadEditor.RemoveInputCell();">
			<rect x="0px" y="0px" width="150px" height="75px" rx="15px" />
			<text x="75px" y="50px" font-size="24" stroke-width="3px" 
					text-anchor="middle">DEL CELL</text> 
		</g>


	</g>


	<!-- ********************************************************************** -->

	<!-- Delete an entire row of inputs and move the rest up. -->
	<g transform="translate(660,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<rect x="7" y="7px" width="150px" height="75px" rx="15px"  fill="grey" 
			stroke="none" stroke-width="0px" filter="url(#MB_DropShadowFilter)"/>

		<g class="buttonactivate" fill="url(#MB_MoreButtonColour)" 
				onclick="LadEditor.RemoveInputRow();">
			<rect x="0px" y="0px" width="150px" height="75px" rx="15px" />
		<text x="75px" y="50px" font-size="24" stroke-width="3px" 
				text-anchor="middle">DEL ROW</text> 
		</g>


	</g>


	<!-- ********************************************************************** -->

	<!-- Delete an entire column of inputs and move the rest up. -->
	<g transform="translate(820,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<rect x="7" y="7px" width="150px" height="75px" rx="15px"  fill="grey" 
			stroke="none" stroke-width="0px" filter="url(#MB_DropShadowFilter)"/>

		<g class="buttonactivate" fill="url(#MB_MoreButtonColour)" 
				onclick="LadEditor.RemoveInputCol();">
			<rect x="0px" y="0px" width="150px" height="75px" rx="15px" />
		<text x="75px" y="50px" font-size="24" stroke-width="3px" 
				text-anchor="middle">DEL COL</text> 
		</g>


	</g>

	<!-- ********************************************************************** -->

	<!-- Delete the current input cell, but don't move any other cells. -->
	<g transform="translate(980,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<rect x="7" y="7px" width="150px" height="75px" rx="15px"  fill="grey" 
			stroke="none" stroke-width="0px" filter="url(#MB_DropShadowFilter)"/>

		<g class="buttonactivate" fill="url(#MB_MoreButtonColour)" 
				onclick="LadEditor.DeleteInputCell();">
			<rect x="0px" y="0px" width="150px" height="75px" rx="15px" />
			<text x="75px" y="50px" font-size="24" stroke-width="3px" 
					text-anchor="middle">DEL</text> 
		</g>


	</g>


	<!-- ********************************************************************** -->

	</g>

</g> <!-- inputmatrixeditbuttons -->


<!-- ###################################################################### -->

<!-- ********************************************************************** -->

<g id="outputbuttons">


	<!-- Show the tab. -->
	<g transform="translate(5,5)"	fill="url(#MB_InsRightColour)" >
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" stroke="black" font-size="18" 
				stroke-width="2px" text-anchor="middle">COIL</text>
	</g>

	<g transform="translate(5,45) scale(0.7) ">

	<!-- Add normal coil output. -->
	<g transform="translate(0,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'out');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(5,25)" stroke="black" stroke-width="3px">
				<line x1="0px" y1="0px" x2="17px" y2="0px" />
				<line x1="57px" y1="0px" x2="74px" y2="0px" />
				<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
				<text x="22px" y="5px" font-size="12" >OUT</text> 
			</g>
			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">OUT</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'out');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add a set coil output. -->
	<g transform="translate(90,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'set');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(5,25)" stroke="black" stroke-width="3px">
				<line x1="0px" y1="0px" x2="17px" y2="0px" />
				<line x1="57px" y1="0px" x2="74px" y2="0px" />
				<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
				<text x="22px" y="7px" font-size="16" >SET</text> 
			</g>
			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">SET</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'set');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add a reset coil output. -->
	<g transform="translate(180,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'rst');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(5,25)" stroke="black" stroke-width="3px">
				<line x1="0px" y1="0px" x2="17px" y2="0px" />
				<line x1="57px" y1="0px" x2="74px" y2="0px" />
				<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
				<text x="22px" y="7px" font-size="16" >RST</text> 
			</g>
			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">RST</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'rst');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add a one shot coil output. -->
	<g transform="translate(270,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'pd');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(5,25)" stroke="black" stroke-width="3px">
				<line x1="0px" y1="0px" x2="17px" y2="0px" />
				<line x1="57px" y1="0px" x2="74px" y2="0px" />
				<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
				<text x="22px" y="7px" font-size="16" >PD</text> 
			</g>
			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">PD</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'pd');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add normal coil output for a range of addresses. -->
	<g transform="translate(450,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'out2');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(5,25)" stroke="black" stroke-width="3px">
				<line x1="0px" y1="0px" x2="17px" y2="0px" />
				<line x1="57px" y1="0px" x2="74px" y2="0px" />
				<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
				<text x="22px" y="5px" font-size="12" >OUT</text> 
				<circle cx="10px" cy="-15px" r="5px" fill="black" />
				<circle cx="60px" cy="-15px" r="5px" fill="black" />
			</g>
			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">OUT</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'out2');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add a set coil output for a range of addresses. -->
	<g transform="translate(540,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'set2');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(5,25)" stroke="black" stroke-width="3px">
				<line x1="0px" y1="0px" x2="17px" y2="0px" />
				<line x1="57px" y1="0px" x2="74px" y2="0px" />
				<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
				<text x="22px" y="7px" font-size="16" >SET</text> 
				<circle cx="10px" cy="-15px" r="5px" fill="black" />
				<circle cx="60px" cy="-15px" r="5px" fill="black" />
			</g>
			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">SET</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'set2');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add a reset coil output for a range of addresses. -->
	<g transform="translate(630,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'rst2');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(5,25)" stroke="black" stroke-width="3px">
				<line x1="0px" y1="0px" x2="17px" y2="0px" />
				<line x1="57px" y1="0px" x2="74px" y2="0px" />
				<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
				<text x="22px" y="7px" font-size="16" >RST</text> 
				<circle cx="10px" cy="-15px" r="5px" fill="black" />
				<circle cx="60px" cy="-15px" r="5px" fill="black" />
			</g>
			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">RST</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'rst2');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Add a one shot coil output for a range of addresses. -->
	<g transform="translate(720,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'pd2');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(5,25)" stroke="black" stroke-width="3px">
				<line x1="0px" y1="0px" x2="17px" y2="0px" />
				<line x1="57px" y1="0px" x2="74px" y2="0px" />
				<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
				<text x="22px" y="7px" font-size="16" >PD</text> 
				<circle cx="10px" cy="-15px" r="5px" fill="black" />
				<circle cx="60px" cy="-15px" r="5px" fill="black" />
			</g>
			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">PD</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'pd2');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

		<!-- Instruction masks. These mask off instructions which are not valid
			for the current rung type. -->
	 	<!-- Mask for single input coils. -->
	 	<g transform="translate(-5,-5)" id="maskcoilssingle" class="runghide">
			<rect x="0" y="0" width="815" height="140" rx="15" 
				filter="url(#MB_DropShadowFilter)" fill="grey" opacity="0.75"/>
		</g>


	<!-- ********************************************************************** -->


	</g>

</g> <!-- outputs -->

<!-- ********************************************************************** -->

<!-- Program control (output) instruction edit buttons. -->
<g id="progcontrolbuttons">


	<!-- Show the tab. -->
	<g transform="translate(105,5)"	fill="url(#MB_InsRightColour)" >
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" stroke="black" font-size="18" 
				stroke-width="2px" text-anchor="middle">PROG</text>
	</g>

	<g transform="translate(5,45) scale(0.7) ">

	<!-- ********************************************************************** -->

	<!-- Subroutine call. CALL -->
	<g transform="translate(0,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'call');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">CALL</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">CALL</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'call');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Subroutine returl. RT -->
	<g transform="translate(130,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'rt');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">RT</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">RT</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'rt');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Subroutine return conditional. RTC -->
	<g transform="translate(260,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'rtc');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">RTC</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">RTC</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'rtc');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>


	<!-- ********************************************************************** -->

	<!-- Program end. END -->
	<g transform="translate(390,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'end');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">END</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">END</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'end');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>


	<!-- ********************************************************************** -->

	<!-- Program end conditional. ENDC -->
	<g transform="translate(520,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'endc');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">ENDC</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">ENDC</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'endc');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- For in for/next loop. FOR -->
	<g transform="translate(650,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'for');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">FOR</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">FOR</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'for');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>


	<!-- ********************************************************************** -->

	<!-- Next in for/next loop. NEXT -->
	<g transform="translate(780,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'next');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">NEXT</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">NEXT</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'next');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

		<!-- Instruction masks. These mask off instructions which are not valid
			for the current rung type. -->
	 	<g transform="translate(-5,-5)" id="maskprogsingle" class="runghide">
			<rect x="0" y="0" width="915" height="140" rx="15" 
				filter="url(#MB_DropShadowFilter)" fill="grey" opacity="0.75"/>
		</g>


	<!-- ********************************************************************** -->

	</g>

</g> <!-- program control. -->

<!-- ********************************************************************** -->


<!-- ********************************************************************** -->

<!-- Timer / counter instruction edit buttons. -->
<g id="timercounterbuttons">


	<!-- Show the tab. -->
	<g transform="translate(205,5)"	fill="url(#MB_InsRightColour)" >
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" stroke="black" font-size="18" 
				stroke-width="2px" text-anchor="middle">TMR</text>
	</g>

	<g transform="translate(5,45) scale(0.7) ">

	<!-- ********************************************************************** -->

	<!-- On delay timer. -->
	<g transform="translate(0,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'tmr');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">TMR</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">TMR</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'tmr');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Off delay timer. -->
	<g transform="translate(130,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'tmroff');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">TMROFF</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">TMROFF</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'tmroff');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>


	<!-- ********************************************************************** -->

	<!-- On delay accumulating timer. -->
	<g transform="translate(280,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<rect x="7" y="7px" width="120px" height="80px" rx="15px"  fill="grey" 
			stroke="none" stroke-width="0px" filter="url(#MB_DropShadowFilter)"/>

		<g class="buttonactivate" fill="url(#MB_OutputMultiColour)" 
				onclick="LadEditor.AddOutput('replace', 'tmra');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">TMRA</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">TMRA</text> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Up counter. -->
	<g transform="translate(410,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<rect x="7" y="7px" width="120px" height="80px" rx="15px"  fill="grey" 
			stroke="none" stroke-width="0px" filter="url(#MB_DropShadowFilter)"/>

		<g class="buttonactivate" fill="url(#MB_OutputMultiColour)" 
				onclick="LadEditor.AddOutput('replace', 'cntu');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">CNTU</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">CNTU</text> 
		</g>

	</g>


	<!-- ********************************************************************** -->

	<!-- Down counter. -->
	<g transform="translate(540,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<rect x="7" y="7px" width="120px" height="80px" rx="15px"  fill="grey" 
			stroke="none" stroke-width="0px" filter="url(#MB_DropShadowFilter)"/>

		<g class="buttonactivate" fill="url(#MB_OutputMultiColour)" 
				onclick="LadEditor.AddOutput('replace', 'cntd');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">CNTD</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">CNTD</text> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Up/down counter. -->
	<g transform="translate(690,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<rect x="7" y="7px" width="120px" height="80px" rx="15px"  fill="grey" 
			stroke="none" stroke-width="0px" filter="url(#MB_DropShadowFilter)"/>

		<g class="buttonactivate" fill="url(#MB_OutputMultiColour)" 
				onclick="LadEditor.AddOutput('replace', 'udc');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">UDC</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">UDC</text> 
		</g>

	</g>

	<!-- ********************************************************************** -->
		<!-- Instruction masks. These mask off instructions which are not valid
			for the current rung type. -->
	 	<!-- Mask for single input timers. -->
	 	<g transform="translate(-5,-5)" id="masktimersingle" class="runghide">
			<rect x="0" y="0" width="265" height="140" rx="15" 
				filter="url(#MB_DropShadowFilter)" fill="grey" opacity="0.75"/>
		</g>

	 	<!-- Mask for double input timers and counters. -->
	 	<g transform="translate(275,-5)" id="masktimerdouble" class="runghide">
			<rect x="0" y="0" width="395" height="100" rx="15" 
				filter="url(#MB_DropShadowFilter)" fill="grey" opacity="0.75"/>
		</g>

	 	<!-- Mask for triple input counters. -->
	 	<g transform="translate(685,-5)" id="masktimertriple" class="runghide">
			<rect x="0" y="0" width="135" height="100" rx="15" 
				filter="url(#MB_DropShadowFilter)" fill="grey" opacity="0.75"/>
		</g>

	</g>

</g> <!-- timers and counters. -->

<!-- ********************************************************************** -->

<!-- ********************************************************************** -->

<!-- Copy data instruction edit buttons. -->
<g id="copydatabuttons">


	<!-- Show the tab. -->
	<g transform="translate(305,5)"	fill="url(#MB_InsRightColour)" >
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" stroke="black" font-size="18" 
				stroke-width="2px" text-anchor="middle">COPY</text>
	</g>

	<g transform="translate(5,45) scale(0.7) ">

	<!-- ********************************************************************** -->

	<!-- Copy single. -->
	<g transform="translate(0,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'copy');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">COPY</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">COPY</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'copy');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Copy block. -->
	<g transform="translate(130,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'cpyblk');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">CPYBLK</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">CPYBLK</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'cpyblk');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Fill. -->
	<g transform="translate(260,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'fill');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">FILL</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">FILL</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'fill');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>


	<!-- ********************************************************************** -->

	<!-- Pack. -->
	<g transform="translate(390,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'pack');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">PACK</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">PACK</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'pack');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>


	<!-- ********************************************************************** -->

	<!-- Unpack. -->
	<g transform="translate(520,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'unpack');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<g transform="translate(22,10)" stroke="black" stroke-width="3px">
				<rect x="0" y="0" width="75" height="25" rx="5" fill="none" />
				<text x="37px" y="18px" font-size="16" text-anchor="middle">UNPACK</text>
			</g>
			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">UNPACK</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'unpack');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>


	<!-- ********************************************************************** -->

		<!-- Instruction masks. These mask off instructions which are not valid
			for the current rung type. -->
	 	<g transform="translate(-5,-5)" id="maskcopysingle" class="runghide">
			<rect x="0" y="0" width="655" height="140" rx="15" 
				filter="url(#MB_DropShadowFilter)" fill="grey" opacity="0.75"/>
		</g>


	<!-- ********************************************************************** -->

	</g>

</g> <!-- Copy data. -->

<!-- ********************************************************************** -->

<!-- ###################################################################### -->

<g id="outputmatrixeditbuttons" >
	<!-- ********************************************************************** -->

	<!-- Show the tab. -->
	<g transform="translate(605,5)" fill="url(#MB_InsRightColour)">
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" stroke="black" font-size="18" 
				stroke-width="2px" text-anchor="middle">EDIT</text>
	</g>


	<g transform="translate(5,50) scale(0.5)">

	<!-- Insert an empty cell in the outputs. -->
	<g transform="translate(0,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<rect x="7" y="7px" width="150px" height="75px" rx="15px"  fill="grey" 
			stroke="none" stroke-width="0px" filter="url(#MB_DropShadowFilter)"/>

		<g class="buttonactivate" fill="url(#MB_MoreButtonColour)" 
				onclick="LadEditor.InsertOutputRow();">
			<rect x="0px" y="0px" width="150px" height="75px" rx="15px" />
			<text x="75px" y="50px" font-size="24" stroke-width="3px" 
					text-anchor="middle">INS ROW</text> 
		</g>


	</g>

	<!-- ********************************************************************** -->

	<!-- Delete an output and shift the remainder up. -->
	<g transform="translate(160,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<rect x="7" y="7px" width="150px" height="75px" rx="15px"  fill="grey" 
			stroke="none" stroke-width="0px" filter="url(#MB_DropShadowFilter)"/>

		<g class="buttonactivate" fill="url(#MB_MoreButtonColour)" 
				onclick="LadEditor.DeleteOutputRow();">
			<rect x="0px" y="0px" width="150px" height="75px" rx="15px" />
			<text x="75px" y="50px" font-size="24" stroke-width="3px" 
					text-anchor="middle">DEL ROW</text> 
		</g>


	</g>

	<!-- ********************************************************************** -->

	</g>

</g> <!-- outputmatrixeditbuttons -->

<!-- ********************************************************************** -->

<g id="findbuttons">


	<!-- Show the tab. -->
	<g transform="translate(405,5)"	fill="url(#MB_InsRightColour)" >
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" stroke="black" font-size="18" 
				stroke-width="2px" text-anchor="middle">FIND</text>
	</g>

	<g transform="translate(5,45) scale(0.7) ">

	<!-- Find equal to. -->
	<g transform="translate(0,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'findeq');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="40px" y="40px" font-size="36"  stroke-width="3px"
					text-anchor="middle">=</text> 

			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">EQ</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'findeq');">
		<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Find not equal to. -->
	<g transform="translate(90,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'findne');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="40px" y="40px" font-size="36"  stroke-width="3px"
					text-anchor="middle">!=</text> 

			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">NE</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'findne');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Find greater than. -->
	<g transform="translate(180,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'findgt');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="40px" y="40px" font-size="36"  stroke-width="3px"
					text-anchor="middle">&gt;</text> 

			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">GT</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'findgt');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Find greater than or equal to. -->
	<g transform="translate(270,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'findge');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="40px" y="40px" font-size="36"  stroke-width="3px"
					text-anchor="middle">&gt;=</text> 

			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">GE</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'findge');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>


	<!-- ********************************************************************** -->

	<!-- Find less than. -->
	<g transform="translate(360,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'findlt');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="40px" y="40px" font-size="36"  stroke-width="3px"
					text-anchor="middle">&lt;</text> 

			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">LT</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'findlt');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Find less than or equal to. -->
	<g transform="translate(450,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'findle');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="40px" y="40px" font-size="36"  stroke-width="3px"
					text-anchor="middle">&lt;=</text> 

			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">LE</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'findle');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Find incremental equal to . -->
	<g transform="translate(640,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'findieq');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="40px" y="40px" font-size="36"  stroke-width="3px"
					text-anchor="middle">=</text> 

			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">IEQ</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'findieq');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Find incremental not equal to. -->
	<g transform="translate(730,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'findine');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="40px" y="40px" font-size="36"  stroke-width="3px"
					text-anchor="middle">!=</text> 

			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">INE</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'findine');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Find incremental greater than. -->
	<g transform="translate(820,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'findigt');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="40px" y="40px" font-size="36"  stroke-width="3px"
					text-anchor="middle">&gt;</text> 

			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">IGT</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'findigt');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Find incremental greater than or equal to. -->
	<g transform="translate(910,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'findige');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="40px" y="40px" font-size="36"  stroke-width="3px"
					text-anchor="middle">&gt;=</text> 

			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">IGE</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'findige');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>


	<!-- ********************************************************************** -->

	<!-- Find incremental less than. -->
	<g transform="translate(1000,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'findilt');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="40px" y="40px" font-size="36"  stroke-width="3px"
					text-anchor="middle">&lt;</text> 

			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">ILT</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'findilt');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Find incremental less than or equal to. -->
	<g transform="translate(1090,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonNarrowShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'findile');">
			<rect x="0px" y="0px" width="80px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="40px" y="40px" font-size="36"  stroke-width="3px"
					text-anchor="middle">&lt;=</text> 

			<text x="40px" y="67px" font-size="28" stroke-width="3px" 
					text-anchor="middle">ILE</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'findile');">
			<use xlink:href="#MB_OutputButtonNarrowDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

		<!-- Instruction masks. These mask off instructions which are not valid
			for the current rung type. -->
	 	<g transform="translate(-5,-5)" id="maskfindsingle" class="runghide">
			<rect x="0" y="0" width="1185" height="140" rx="15" 
				filter="url(#MB_DropShadowFilter)" fill="grey" opacity="0.75"/>
		</g>

	<!-- ********************************************************************** -->

	</g>

</g> <!-- find -->

<!-- ********************************************************************** -->

<!-- ********************************************************************** -->

<!-- Miscellaneous instruction edit buttons. -->
<g id="miscbuttons">


	<!-- Show the tab. -->
	<g transform="translate(505,5)"	fill="url(#MB_InsRightColour)" >
		<use xlink:href="#MB_MenuTab"/>
		<text x="67px" y="25px" stroke="black" font-size="18" 
				stroke-width="2px" text-anchor="middle">MISC</text>
	</g>

	<g transform="translate(5,45) scale(0.7) ">

	<!-- ********************************************************************** -->

	<!-- Math decimal. MATHDEC -->
	<g transform="translate(0,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'mathdec');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="60px" y="40px" font-size="32"  stroke-width="3px"
					text-anchor="middle">+-*/</text> 

			<text x="60px" y="67px" font-size="18" stroke-width="3px" 
					text-anchor="middle">MATHDEC</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'mathdec');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Math hex. MATHHEX -->
	<g transform="translate(130,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'mathhex');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="60px" y="40px" font-size="32"  stroke-width="3px"
					text-anchor="middle">+-*/</text> 

			<text x="60px" y="67px" font-size="18" stroke-width="3px" 
					text-anchor="middle">MATHHEX</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'mathhex');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>

	<!-- ********************************************************************** -->

	<!-- Math sum. SUM -->
	<g transform="translate(260,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<use xlink:href="#MB_OutputButtonWideShadow"/>

		<g class="buttonactivate" fill="url(#MB_ReplaceColour)" 
				onclick="LadEditor.AddOutput('replace', 'sum');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="60px" y="40px" font-size="32"  stroke-width="3px"
					text-anchor="middle">+ (...)</text> 

			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">SUM</text> 
		</g>

		<g class="buttonactivate" onclick="LadEditor.AddOutput('below', 'sum');">
			<use xlink:href="#MB_OutputButtonWideDown"/> 
		</g>

	</g>


	<!-- ********************************************************************** -->

	<!-- Shift register. SHFRG -->
	<g transform="translate(480,0)" >

		<!-- This rectangle is used for the drop shadown and needs to match 
				the size used for the button. -->
		<rect x="7" y="7px" width="120px" height="80px" rx="15px"  fill="grey" 
			stroke="none" stroke-width="0px" filter="url(#MB_DropShadowFilter)"/>

		<g class="buttonactivate" fill="url(#MB_OutputMultiColour)" 
				onclick="LadEditor.AddOutput('replace', 'shfrg');">
			<rect x="0px" y="0px" width="120px" height="80px" rx="15px" />

			<!-- This is the ladder symbol.  -->
			<text x="60px" y="40px" font-size="32"  stroke-width="3px"
					text-anchor="middle">&lt;&lt;&lt;</text> 

			<text x="60px" y="67px" font-size="24" stroke-width="3px" 
					text-anchor="middle">SHFRG</text> 
		</g>

	</g>

	<!-- ********************************************************************** -->

		<!-- Instruction masks. These mask off instructions which are not valid
			for the current rung type. -->
	 	<!-- Mask for single input math instructions. -->
	 	<g transform="translate(-5,-5)" id="maskmiscsingle" class="runghide">
			<rect x="0" y="0" width="395" height="140" rx="15" 
				filter="url(#MB_DropShadowFilter)" fill="grey" opacity="0.75"/>
		</g>


	 	<!-- Mask for double input misc (shift register) instructions. -->
	 	<g transform="translate(475,-5)" id="maskmisctriple" class="runghide">
			<rect x="0" y="0" width="135" height="100" rx="15" 
				filter="url(#MB_DropShadowFilter)" fill="grey" opacity="0.75"/>
		</g>


	<!-- ********************************************************************** -->
	</g>

</g> <!-- Misc. -->

<!-- ********************************************************************** -->

<!-- ###################################################################### -->


</svg>



</div>


<div id="editprototype">

<!-- This is a container for holding a complete rung of SVG. -->
<svg xmlns="http://www.w3.org/2000/svg" 
	xmlns:html="http://www.w3.org/1999/xhtml"
	xmlns:xlink="http://www.w3.org/1999/xlink"
	version="1.1" baseProfile="full" width="1000px" height="650px">



 	<!-- Ladder symbol definitions. -->
		<!-- This is an empty matrix location. -->
		<g id="none">
		 	<rect x="2px" y="-35px" width="75px" height="75px" class="emptyeditcell"/> 
		</g>

 		<g id="inputno">
		 	<!-- This is a normally open contact. 1 unit wide. -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="0px" y1="0px" x2="30px" y2="0px" /> 
			<line x1="45px" y1="0px" x2="75px" y2="0px" /> 
			<line x1="30px" y1="-15px" x2="30px" y2="15px" /> 
			<line x1="45px" y1="-15px" x2="45px" y2="15px" /> 
		</g>
		<g id="inputnc">
			<!-- This is a normally closed contact. 1 unit. -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="0px" y1="0px" x2="30px" y2="0px" />
			<line x1="45px" y1="0px" x2="75px" y2="0px" />
			<line x1="30px" y1="-15px" x2="30px" y2="15px" />
			<line x1="45px" y1="-15px" x2="45px" y2="15px" />
			<line x1="20px" y1="12px" x2="55px" y2="-12px" />
		</g>

 		<g id="inputnopd">
		 	<!-- This is a rising edge contact (one shot). 1 unit wide. -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="0px" y1="0px" x2="30px" y2="0px" /> 
			<line x1="45px" y1="0px" x2="75px" y2="0px" /> 
			<line x1="30px" y1="-15px" x2="30px" y2="15px" /> 
			<line x1="45px" y1="-15px" x2="45px" y2="15px" /> 
			<line x1="37" y1="-10" x2="37" y2="10" />
			<line x1="37" y1="-10" x2="32" y2="-5" />
			<line x1="37" y1="-10" x2="41" y2="-5" />
		</g>
 		<g id="inputnond">
		 	<!-- This is a falling edge contact (one shot). 1 unit wide. -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="0px" y1="0px" x2="30px" y2="0px" /> 
			<line x1="45px" y1="0px" x2="75px" y2="0px" /> 
			<line x1="30px" y1="-15px" x2="30px" y2="15px" /> 
			<line x1="45px" y1="-15px" x2="45px" y2="15px" /> 
			<line x1="37" y1="-10" x2="37" y2="10" />
			<line x1="37" y1="10" x2="32" y2="5" />
			<line x1="37" y1="10" x2="41" y2="5" />
		</g>

		<!--  Compare equal. -->
 		<g id="inputcompeq">
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="25" y2="0" />
			<line x1="50" y1="0" x2="75" y2="0" />
		
			<!-- Contacts. -->		
			<line x1="25" y1="-15" x2="25" y2="15" />
			<line x1="50" y1="-15" x2="50" y2="15" />

			<!-- Symbol for Equals. -->		
			<line x1="30" y1="-4" x2="44" y2="-4" />
			<line x1="30" y1="4" x2="44" y2="4" />

		</g>


		<!--  Compare not equal. -->
 		<g id="inputcompneq">
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="25" y2="0" />
			<line x1="50" y1="0" x2="75" y2="0" />
		
			<!-- Contacts. -->		
			<line x1="25" y1="-15" x2="25" y2="15" />
			<line x1="50" y1="-15" x2="50" y2="15" />

			<!-- Symbol for not equal. -->		
			<line x1="30" y1="-4" x2="44" y2="-4" />
			<line x1="30" y1="4" x2="44" y2="4" />
			<line x1="33" y1="10" x2="42" y2="-10" />
		</g>


		<!--  Compare greater than. -->
 		<g id="inputcompgt">
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="25" y2="0" />
			<line x1="50" y1="0" x2="75" y2="0" />
		
			<!-- Contacts. -->		
			<line x1="25" y1="-15" x2="25" y2="15" />
			<line x1="50" y1="-15" x2="50" y2="15" />

			<!-- Symbol for greater than. -->		
			<line x1="30" y1="-5" x2="44" y2="0" />
			<line x1="30" y1="5" x2="44" y2="0" />
		</g>


		<!--  Compare less than. -->
 		<g id="inputcomplt">
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="25" y2="0" />
			<line x1="50" y1="0" x2="75" y2="0" />
		
			<!-- Contacts. -->		
			<line x1="25" y1="-15" x2="25" y2="15" />
			<line x1="50" y1="-15" x2="50" y2="15" />

			<!-- Symbol for less than. -->		
			<line x1="30" y1="0" x2="44" y2="-5" />
			<line x1="30" y1="0" x2="44" y2="5" />
		</g>


		<!--  Compare greater than or equal to. -->
 		<g id="inputcompge">
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="25" y2="0" />
			<line x1="50" y1="0" x2="75" y2="0" />
		
			<!-- Contacts. -->		
			<line x1="25" y1="-15" x2="25" y2="15" />
			<line x1="50" y1="-15" x2="50" y2="15" />

			<!-- Symbol for greater than or equal to. -->		
			<line x1="30" y1="-10" x2="44" y2="-5" />
			<line x1="30" y1="0" x2="44" y2="-5" />
			<line x1="30" y1="5" x2="44" y2="5" />
			<line x1="30" y1="10" x2="44" y2="10" />
		</g>


		<!--  Compare less than or equal to. -->
 		<g id="inputcomple">
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="25" y2="0" />
			<line x1="50" y1="0" x2="75" y2="0" />
		
			<!-- Contacts. -->		
			<line x1="25" y1="-15" x2="25" y2="15" />
			<line x1="50" y1="-15" x2="50" y2="15" />

			<!-- Symbol for less than or equal to. -->		
			<line x1="30" y1="-5" x2="44" y2="-10" />
			<line x1="30" y1="-5" x2="44" y2="0" />
			<line x1="30" y1="5" x2="44" y2="5" />
			<line x1="30" y1="10" x2="44" y2="10" />
		</g>



		<!-- Branch instructions. -->
		<g id="brancht">
			<!-- This is the start (top) of a right branch. -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
		 	<line x1="0px" y1="0px" x2="75px" y2="0px" />
			<line x1="37px" y1="0px" x2="37px" y2="37px" />
			<circle cx="37px" cy="0px" r="3px" stroke-width="5px" />
		</g>

		<g id="branchl">
			<!-- This is a continuation of a left branch. -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="37px" y1="-37px" x2="37px" y2="0px" />
			<line x1="37px" y1="0px" x2="75px" y2="0px" />
		</g>

		<g id="branchr">
			<!-- This is a continuation of a right branch. -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="37px" y1="-37px" x2="37px" y2="0px" />
			<line x1="0px" y1="0px" x2="37px" y2="0px" />
		</g>

		<g id="branchtl">
			<!-- This is a branch T to the left. -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="37px" y1="-37px" x2="37px" y2="37px" />
			<line x1="0px" y1="0px" x2="37px" y2="0px" />
			<circle cx="37px" cy="0px" r="3px" stroke-width="5px" />
		</g>

		<g id="branchtr">
			<!-- This is a branch T to the right. -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="37px" y1="-37px" x2="37px" y2="37px" />
			<line x1="37px" y1="0px" x2="75px" y2="0px" />
			<circle cx="37px" cy="0px" r="3px" stroke-width="5px" />
		</g>

		<g id="branchtu">
			<!-- This is a branch T pointing up. -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="37px" y1="-37px" x2="37px" y2="0px" />
			<line x1="0px" y1="0px" x2="75px" y2="0px" />
			<circle cx="37px" cy="0px" r="3px" stroke-width="5px" />
		</g>

		<g id="branchx">
			<!-- This is a branch cross over. -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="37px" y1="-37px" x2="37px" y2="37px" />
			<line x1="0px" y1="0px" x2="75px" y2="0px" />
			<circle cx="37px" cy="0px" r="3px" stroke-width="5px" />
		</g>


		<g id="branchttl">
			<!-- This is the top-left corner of a branch fork.  -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/>
		 	<line x1="37px" y1="0px" x2="75px" y2="0px" />
			<line x1="37px" y1="0px" x2="37px" y2="37px" />
			<circle cx="37px" cy="0px" r="3px" stroke-width="5px" />
		</g>

		<g id="branchttr">
			<!-- This is the top-right corner of a branch fork.  -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/>
		 	<line x1="0px" y1="0px" x2="37px" y2="0px" />
			<line x1="37px" y1="0px" x2="37px" y2="37px" />
			<circle cx="37px" cy="0px" r="3px" stroke-width="5px" />
		</g>

		<g id="vbarl">
			<!-- This is vertical bar on the left side. -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="20px" y1="-37px" x2="20px" y2="37px" />
		</g>

		<g id="vbarr">
			<!-- This is vertical bar on the right side. -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="55px" y1="-37px" x2="55px" y2="37px" />
		</g>

		<g id="vbar">
			<!-- This is vertical bar (wire). -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="37px" y1="-37px" x2="37px" y2="37px" />
		</g>

		<g id="hbar">
			<!-- This is horizontal bar (wire). -->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="0px" y1="0px" x2="75px" y2="0px" />
		</g>



		<!-- Coil instructions. -->
		<g id="outputout">
			<!-- This is a coil output. 1 unit.-->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="0px" y1="0px" x2="17px" y2="0px" />
			<line x1="57px" y1="0px" x2="225px" y2="0px" />
			<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
			<text x="37px" y="5px" font-size="12" text-anchor="middle">OUT</text> 
		</g>
		<g id="outputset">
			<!-- This is a set output. 1 unit.-->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="0px" y1="0px" x2="17px" y2="0px" />
			<line x1="57px" y1="0px" x2="225px" y2="0px" />
			<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
			<text x="37px" y="5px" font-size="12" text-anchor="middle">SET</text> 
		</g>
		<g id="outputreset">
			<!-- This is a reset output. 1 unit.-->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="0px" y1="0px" x2="17px" y2="0px" />
			<line x1="57px" y1="0px" x2="225px" y2="0px" />
			<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
			<text x="37px" y="5px" font-size="12" text-anchor="middle">RST</text> 
		</g>
		<g id="outputpd">
			<!-- This is a PD (one shot) output. 1 unit.-->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="0px" y1="0px" x2="17px" y2="0px" />
			<line x1="57px" y1="0px" x2="225px" y2="0px" />
			<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
			<text x="37px" y="5px" font-size="12" text-anchor="middle">PD</text> 
		</g>

		<!-- Coil instructions for a range of addresses. This adds in the
				text indicator elipses (...). -->
		<g id="outputout2">
			<!-- This is a coil output. 1 unit.-->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="0px" y1="0px" x2="17px" y2="0px" />
			<line x1="57px" y1="0px" x2="225px" y2="0px" />
			<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
			<text x="37px" y="5px" font-size="12" text-anchor="middle">OUT</text>
			<text x="65px" y="-20px" font-size="12">...</text>
		</g>
		<g id="outputset2">
			<!-- This is a set output. 1 unit.-->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="0px" y1="0px" x2="17px" y2="0px" />
			<line x1="57px" y1="0px" x2="225px" y2="0px" />
			<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
			<text x="37px" y="5px" font-size="12" text-anchor="middle">SET</text> 
			<text x="65px" y="-20px" font-size="12">...</text>
		</g>
		<g id="outputreset2">
			<!-- This is a reset output. 1 unit.-->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="0px" y1="0px" x2="17px" y2="0px" />
			<line x1="57px" y1="0px" x2="225px" y2="0px" />
			<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
			<text x="37px" y="5px" font-size="12" text-anchor="middle">RST</text> 
			<text x="65px" y="-20px" font-size="12">...</text>
		</g>
		<g id="outputpd2">
			<!-- This is a PD (one shot) output. 1 unit.-->
		 	<rect x="2px" y="-35px" width="70px" height="70px" stroke="none"/> 
			<line x1="0px" y1="0px" x2="17px" y2="0px" />
			<line x1="57px" y1="0px" x2="225px" y2="0px" />
			<ellipse cx="37px" cy="0px" rx="20px" ry="12px" fill="none" />
			<text x="37px" y="5px" font-size="12" text-anchor="middle">PD</text> 
			<text x="65px" y="-20px" font-size="12">...</text>
		</g>



		<!-- Program control instructions. -->

		<!-- Program end - END.-->
		<g id="progcontrolend">
		 	<rect x="2px" y="-35px" width="150px" height="70px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="145" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="140" height="45" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">END</text> 
		</g>

		<!-- Program end conditional - ENDC.-->
		<g id="progcontrolendc">
		 	<rect x="2px" y="-35px" width="150px" height="70px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="145" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="140" height="45" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">ENDC</text> 
		</g>

		<!-- Subroutine return - RT.-->
		<g id="progcontrolrt">
		 	<rect x="2px" y="-35px" width="150px" height="70px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="145" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="140" height="45" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">RT</text> 
		</g>

		<!-- Subroutine return conditional - RTC.-->
		<g id="progcontrolrtc">
		 	<rect x="2px" y="-35px" width="150px" height="70px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="145" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="140" height="45" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">RTC</text> 
		</g>

		<!-- Subroutine call - CALL.-->
		<g id="progcontrolcall">
		 	<rect x="2px" y="-35px" width="225px" height="70px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="45" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">CALL</text> 
		</g>

		<!-- Subroutine call subroutina name. -->		
		<text id="calltext" x="15" y="10" font-size="12"> </text> 

		<!-- FOR loop - FOR.-->
		<g id="progcontrolfor">
		 	<rect x="2px" y="-35px" width="150px" height="70px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="145" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="140" height="45" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">FOR</text> 
			<text x="125" y="-10" font-size="12">:</text> 
		</g>

		<!-- For loop interation count. -->		
		<text id="fortext1a" x="15" y="10" font-size="12"> </text> 
		<!-- For loop one shot option. -->
		<text id="fortext1b" x="130" y="-10" font-size="12"> </text> 


		<!-- Next in For/Next loop - NEXT.-->
		<g id="progcontrolnext">
		 	<rect x="2px" y="-35px" width="150px" height="70px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="145" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="140" height="45" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">NEXT</text> 
		</g>

		<!-- Counter/Timers. -->

		<!-- Count up - CNTU.-->
		<g id="timercntu">
		 	<rect x="2px" y="-35px" width="225px" height="150px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<line x1="0" y1="75" x2="5" y2="75" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="140" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="50" y="-10" font-size="12">UP COUNTER</text> 
			<text x="10" y="0" font-size="12">Up</text> 
			<text x="10" y="75" font-size="12">Reset</text> 
			<!-- Addresses. -->
			<text x="50" y="30" font-size="12">Counter:</text> 
			<text x="50" y="50" font-size="12">Set-point:</text> 
		</g>

		<!-- For editing all coutners. - CNTU, CNTD, UDC. -->
		<text id="countertext1a" x="125" y="30" font-size="12"> </text> 
		<text id="countertext1b" x="125" y="50" font-size="12"> </text> 


		<!-- Count down - CNTD.-->
		<g id="timercntd">
		 	<rect x="2px" y="-35px" width="225px" height="150px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<line x1="0" y1="75" x2="5" y2="75" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="140" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="50" y="-10" font-size="12">DOWN COUNTER</text> 
			<text x="10" y="0" font-size="12">Down</text> 
			<text x="10" y="75" font-size="12">Reset</text> 
			<!-- Addresses. -->
			<text x="50" y="30" font-size="12">Counter:</text> 
			<text x="50" y="50" font-size="12">Set-point:</text> 
		</g>

		<!-- Count up and down - UDC.-->
		<g id="timerudc">
		 	<rect x="2px" y="-35px" width="225px" height="225px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<line x1="0" y1="75" x2="5" y2="75" />
			<line x1="0" y1="150" x2="5" y2="150" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="200" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="50" y="-10" font-size="12">UP-DOWN COUNTER </text> 
			<text x="10" y="0" font-size="12">Up</text> 
			<text x="10" y="75" font-size="12">Down</text> 
			<text x="10" y="150" font-size="12">Reset</text> 
			<!-- Addresses. -->
			<text x="50" y="30" font-size="12">Counter:</text> 
			<text x="50" y="50" font-size="12">Set-point:</text> 
		</g>


		<!-- On delay accumulating timer - TMRA.-->
		<g id="timertmra">
		 	<rect x="2px" y="-35px" width="225px" height="150px" stroke="none"/> 
			<!-- Joining lines. -->	
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<line x1="0" y1="75" x2="5" y2="75" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="140" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="50" y="-10" font-size="12">TIMER Retentive</text> 
			<text x="10" y="0" font-size="12">Enable</text> 
			<text x="10" y="75" font-size="12">Reset</text>
			<!-- Addresses. -->
			<text x="50" y="20" font-size="12">Timer:</text> 
			<text x="50" y="40" font-size="12">Set point:</text> 
			<text x="50" y="60" font-size="12">Time base:</text> 
		</g>

		<!-- Display parameters for an on delay accumulating timer - TMRA.-->
		<text id="tmratext1a" x="125" y="20" font-size="12"> </text> 
		<text id="tmratext1b" x="125" y="40" font-size="12"> </text> 
		<text id="tmratext1c" x="125" y="60" font-size="12"> </text> 


		<!-- On delay timer - TMR.-->
		<g id="timertmr">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->	
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">TIMER On-Delay</text> 
			<!-- Addresses. -->
			<text x="150" y="-10" font-size="12">:</text> 
			<text x="10" y="10" font-size="12">Set point:</text> 
			<text x="150" y="10" font-size="12">:</text> 
		</g>

		<!-- Off delay timer - TMROFF.-->
		<g id="timertmroff">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->	
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">TIMER Off-Delay</text> 
			<!-- Addresses. -->
			<text x="150" y="-10" font-size="12">:</text> 
			<text x="10" y="10" font-size="12">Set point:</text> 
			<text x="150" y="10" font-size="12">:</text> 
		</g>

		<!-- These are used to display parameters for normal  
			on-dlay and off-delay timers. -->
		<!-- Timer address. -->		
		<text id="timertext1a" x="160" y="-10" font-size="12"> </text> 
		<!-- Timer set point. -->		
		<text id="timertext1b" x="80" y="10" font-size="12"> </text> 
		<!-- Timer time base. -->		
		<text id="timertext1c" x="160" y="10" font-size="12"> </text> 



		<!-- Copy single - COPY.-->
		<g id="copy">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">COPY Single</text> 
			<text x="8" y="6" font-size="12">Src:</text> 
			<text x="8" y="24" font-size="12">Des:</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
		</g>

		<!-- Addresses. -->		
		<text id="copytext1a" x="40" y="6" font-size="12"> </text> 
		<text id="copytext1b" x="40" y="24" font-size="12"> </text> 
		 <!-- One shot option. -->
		<text id="copytext1c" x="200" y="-10" font-size="12"> </text> 


		<!-- Copy block - CPYBLK.-->
		<g id="cpyblk">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">COPY Block</text> 
			<text x="8" y="6" font-size="12">Src:</text> 
			<text x="8" y="24" font-size="12">Des:</text>
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->	
			<text x="110" y="6" font-size="12">...</text> 
		</g>

		<!-- For displaying addresses for COPY. -->	
		<text id="cpyblktext1a" x="40" y="6" font-size="12"> </text> 
		<text id="cpyblktext1b" x="130" y="6" font-size="12"> </text> 
		<text id="cpyblktext1c" x="40" y="24" font-size="12"> </text> 
		 <!-- One shot option. -->
		<text id="cpyblktext1d" x="200" y="-10" font-size="12"> </text> 


		<!-- Copy fill block - FILL-->
		<g id="fill">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">COPY Fill</text> 
			<text x="8" y="6" font-size="12">Src:</text> 
			<text x="8" y="24" font-size="12">Des:</text>
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->	
			<text x="110" y="24" font-size="12">...</text> 
		</g>

		<!-- For displaying addresses for COPY FILL. -->	
		<text id="filltext1a" x="40" y="6" font-size="12"> </text> 
		<text id="filltext1b" x="40" y="24" font-size="12"> </text> 
		<text id="filltext1c" x="130" y="24" font-size="12"> </text> 
		 <!-- One shot option. -->
		<text id="filltext1d" x="200" y="-10" font-size="12"> </text> 


		<!-- Copy pack - PACK -->
		<g id="pack">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">COPY Pack</text> 
			<text x="8" y="6" font-size="12">Src:</text> 
			<text x="8" y="24" font-size="12">Des:</text>
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<text x="110" y="6" font-size="12">...</text> 
		</g>

		<!-- For displaying addresses for COPY PACK. -->	
		<text id="packtext1a" x="40" y="6" font-size="12"> </text> 
		<text id="packtext1b" x="130" y="6" font-size="12"> </text> 
		<text id="packtext1c" x="40" y="24" font-size="12"> </text> 
		 <!-- One shot option. -->
		<text id="packtext1d" x="200" y="-10" font-size="12"> </text> 

		<!-- Copy unpack - UNPACK -->
		<g id="unpack">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">COPY Unpack</text> 
			<text x="8" y="6" font-size="12">Src:</text> 
			<text x="8" y="24" font-size="12">Des:</text>
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<text x="110" y="24" font-size="12">...</text> 
		</g>

		<!-- For displaying addresses for COPY PACK. -->	
		<text id="unpacktext1a" x="40" y="6" font-size="12"> </text> 
		<text id="unpacktext1b" x="40" y="24" font-size="12"> </text> 
		<text id="unpacktext1c" x="130" y="24" font-size="12"> </text> 
		 <!-- One shot option. -->
		<text id="unpacktext1d" x="200" y="-10" font-size="12"> </text> 



		<!-- Find equal to - FINDEQ -->
		<g id="findeq">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">FIND =</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->
			<text x="110" y="10" font-size="12">...</text>
			<text x="8" y="10" font-size="12">Rng:</text> 
			<text x="8" y="30" font-size="12">Rlts:</text> 
		</g>

		<!-- For displaying addresses for all FIND instructions. -->
		<!-- Value to search for. -->	
		<text id="findtext1a" x="80" y="-10" font-size="12"> </text>
		<!-- Start of search range. -->	
		<text id="findtext1b" x="40" y="10" font-size="12"> </text> 
		<!-- End of search range. -->	
		<text id="findtext1c" x="130" y="10" font-size="12"> </text> 
		<!-- Result register. -->	
		<text id="findtext1d" x="40" y="30" font-size="12"> </text> 
		<!-- Result flag. -->	
		<text id="findtext1e" x="130" y="30" font-size="12"> </text> 
		 <!-- One shot option. -->
		<text id="findtext1f" x="200" y="-10" font-size="12"> </text> 


		<!-- Find not equal to - FINDNE -->
		<g id="findne">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">FIND !=</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->
			<text x="110" y="10" font-size="12">...</text>
			<text x="8" y="10" font-size="12">Rng:</text> 
			<text x="8" y="30" font-size="12">Rlts:</text> 
		</g>

		<!-- Find less than - FINDLT -->
		<g id="findlt">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">FIND &lt;</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->
			<text x="110" y="10" font-size="12">...</text>
			<text x="8" y="10" font-size="12">Rng:</text> 
			<text x="8" y="30" font-size="12">Rlts:</text> 
		</g>

		<!-- Find less than or equal to - FINDLE -->
		<g id="findle">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">FIND &lt;=</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->
			<text x="110" y="10" font-size="12">...</text>
			<text x="8" y="10" font-size="12">Rng:</text> 
			<text x="8" y="30" font-size="12">Rlts:</text> 
		</g>

		<!-- Find greater than - FINDGT -->
		<g id="findgt">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">FIND &gt;</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->
			<text x="110" y="10" font-size="12">...</text>
			<text x="8" y="10" font-size="12">Rng:</text> 
			<text x="8" y="30" font-size="12">Rlts:</text> 
		</g>

		<!-- Find greater than or equal to - FINDGE -->
		<g id="findge">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">FIND &gt;=</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->
			<text x="110" y="10" font-size="12">...</text>
			<text x="8" y="10" font-size="12">Rng:</text> 
			<text x="8" y="30" font-size="12">Rlts:</text> 
		</g>


		<!-- Find incremental equal to - FINDIEQ -->
		<g id="findieq">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">FINDI =</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->
			<text x="110" y="10" font-size="12">...</text>
			<text x="8" y="10" font-size="12">Rng:</text> 
			<text x="8" y="30" font-size="12">Rlts:</text> 
		</g>


		<!-- Find incremental not equal to - FINDINE -->
		<g id="findine">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">FINDI !=</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->
			<text x="110" y="10" font-size="12">...</text>
			<text x="8" y="10" font-size="12">Rng:</text> 
			<text x="8" y="30" font-size="12">Rlts:</text> 
		</g>


		<!-- Find incremental greater than - FINDIGT -->
		<g id="findigt">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">FINDI &gt;</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->
			<text x="110" y="10" font-size="12">...</text>
			<text x="8" y="10" font-size="12">Rng:</text> 
			<text x="8" y="30" font-size="12">Rlts:</text> 
		</g>


		<!-- Find incremental greater than or equal to - FINDIGE -->
		<g id="findige">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">FINDI &gt;=</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->
			<text x="110" y="10" font-size="12">...</text>
			<text x="8" y="10" font-size="12">Rng:</text> 
			<text x="8" y="30" font-size="12">Rlts:</text> 
		</g>


		<!-- Find incremental less than - FINDILT -->
		<g id="findilt">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">FINDI &lt;</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->
			<text x="110" y="10" font-size="12">...</text>
			<text x="8" y="10" font-size="12">Rng:</text> 
			<text x="8" y="30" font-size="12">Rlts:</text> 
		</g>


		<!-- Find incremental less than or equal to - FINDILE -->
		<g id="findile">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">FINDI &lt;=</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->
			<text x="110" y="10" font-size="12">...</text>
			<text x="8" y="10" font-size="12">Rng:</text> 
			<text x="8" y="30" font-size="12">Rlts:</text> 
		</g>




		<!-- Shift register - SHFRG -->
		<g id="shfrg">
		 	<rect x="2px" y="-35px" width="225px" height="210px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<line x1="0" y1="75" x2="5" y2="75" />
			<line x1="0" y1="150" x2="5" y2="150" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="200" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="50" y="-10" font-size="12">SHIFT REGISTER </text> 
			<text x="10" y="0" font-size="12">Data</text> 
			<text x="10" y="75" font-size="12">Clock</text> 
			<text x="10" y="150" font-size="12">Reset</text> 
			<!-- Addresses. -->
			<text x="50" y="30" font-size="12">Start: </text> 
			<text x="50" y="50" font-size="12">End:  </text> 
		</g>
	
		<!-- Math decimal - MATHDEC -->
		<text id="shfrgtext1a" x="100" y="30" font-size="12"> </text> 
		<text id="shfrgtext1b" x="100" y="50" font-size="12"> </text> 
	

		<!-- Math decimal - MATHDEC -->
		<g id="mathdec">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">MATHDEC</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->
			<text x="70" y="10" font-size="12">=</text>
		</g>

		<!-- For MATHDEC and MATHHEX instructions. -->
		<!-- Addresses. -->
		<text id="mathtext1a" x="8" y="10" font-size="12"> </text>
		<text id="mathtext1b" x="8" y="28" font-size="12"> </text> 
		 <!-- One shot option. -->
		<text id="mathtext1c" x="200" y="-10" font-size="12"> </text> 


		<!-- Math hex - MATHHEX -->
		<g id="mathhex">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">MATHHEX</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->
			<text x="70" y="10" font-size="12">=</text>
		</g>


		<!-- Math sum - SUM -->
		<g id="sum">
		 	<rect x="2px" y="-35px" width="225px" height="75px" stroke="none"/> 
			<!-- Joining lines. -->		
			<line x1="0" y1="0" x2="5" y2="0" />
			<line x1="220" y1="0" x2="225" y2="0" />
			<!-- Enclosing box. -->
			<rect x="5" y="-30" width="215" height="65" rx="5" fill="none" />
			<!-- Instruction labels. -->
			<text x="10" y="-10" font-size="12">SUM</text> 
			 <!-- One shot option. -->
			<text x="190" y="-10" font-size="12">:</text> 
			<!-- Addresses. -->
			<text x="70" y="10" font-size="12">=</text>
			<text x="140" y="10" font-size="12">...</text> 
		</g>


		<!-- For SUM instruction. -->
		<!-- Addresses. -->
		<text id="sumtext1a" x="8" y="10" font-size="12"> </text>
		<text id="sumtext1b" x="85" y="10" font-size="12"> </text> 
		<text id="sumtext1c" x="160" y="10" font-size="12"> </text> 
		 <!-- One shot option. -->
		<text id="sumtext1d" x="200" y="-10" font-size="12"> </text> 


		<!-- Note: There must be at least one character in the defintion
			SVG or we will encounter an error when attempting to use it.-->
		<!-- This is for a contact input with one address.-->
		<text id="inptext1" x="15px" y="-20px" font-size="14" > </text>

		<!-- This is for a contact input with two addresses.-->
		<text id="inptext2a" x="8px" y="-20px" font-size="12" > </text>
		<text id="inptext2b" x="8px" y="30px" font-size="12" > </text>

		<!-- This is for coil outputs with two addresses.-->
		<text id="coiltext2a" x="15px" y="-20px" font-size="12" > </text>
		<text id="coiltext2b" x="85px" y="-20px" font-size="12" > </text>


		<!-- This is for a coil output with one address.-->
		<text id="outptext1" x="15px" y="-20px" font-size="14"> </text> 

		<!-- This is for holding a rung of ladder.-->
		<g id="laddercontainer" transform="translate(0,50)">
		</g>


		<!-- Join inputs to outputs (first rail). -->
		<line id="svginprail1" x1="610" y1="0px" x2="610" y2="0px" />
		<!-- Join inputs to outputs (second optional rail). -->
		<line id="svginprail2" x1="610" y1="75px" x2="610" y2="75px" />
		<!-- Join inputs to outputs (third optional rail). -->
		<line id="svginprail3" x1="610" y1="150px" x2="610" y2="150px" />

		<!-- Joining rail for outputs. -->
		<line id="svgoutprail" x1="610" y1="0px" x2="610" y2="0px" />


		<circle id="svgoutraildecoration" cx="610px" cy="0px" r="3px" stroke-width="5px" />

		<!-- Container for a single endit cell. -->
		<g id="cellcontainer">
		</g>


<!-- ********************************************************************** -->


</svg>

</div>

<!-- ********************************************************************** -->

<!-- This is a container where we store editaddrprototype 
	when we aren't using it. -->
<div id="addresseditstorage">
</div>

<!-- This is a container for holding the address editing inputs. -->
<div id="editaddrprototype">

	<!-- This is a dummy edit field to keep the spacing constant. -->
	<div id="addresseditnone" class="editaddrshow">
		<p>No addresses</p>
	</div>

 
	<!-- Edit for contacts with one address. -->
	<div id="addreditcontact1" class="editaddrhide">
		<form name="addreditcontact1" class="editaddrfields">
			 <input type="text" name="contact1a" id="editcontact1a" maxlength="10" size="10" />
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditcontact1');">Change</button>
	</div>


	<!-- Edit for contacts with two addresses. -->
	<div id="addreditcontact2" class="editaddrhide">
		<form name="addreditcontact2" class="editaddrfields">
			 <input type="text" name="contact2a" id="editcontact2a" maxlength="10" size="10" />
			 <input type="text" name="contact2b" id="editcontact2b" maxlength="10" size="10" />
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditcontact2');">Change</button>
	</div>


	<!-- Edit for coils with one address. -->
	<div id="addreditcoil1" class="editaddrhide">
		<form name="addreditcoil1" class="editaddrfields">
			 <input type="text" name="coil1a" id="editcoil1a" maxlength="10" size="10" />
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditcoil1');">Change</button>
	</div>


	<!-- Edit for coils with two addresses. -->
	<div id="addreditcoil2" class="editaddrhide">
		<form name="addreditcoil2" class="editaddrfields">
			 <input type="text" name="coil2a" id="editcoil2a" maxlength="10" size="10" />
			 <input type="text" name="coil2b" id="editcoil2b" maxlength="10" size="10" />
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditcoil2');">Change</button>
	</div>


	<!-- Edit for subroutine calls. CALL. -->
	<div id="addreditcall" class="editaddrhide">
		<form name="addreditcall" class="editaddrfields">
			 Subroutine name: <input type="text" name="subrname" id="editcall" maxlength="24" size="25" />
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditcall');">Change</button>
	</div>


	<!-- Edit for FOR in For/Next loops. FOR. -->
	<div id="addreditfor" class="editaddrhide">
		<form name="addreditfor" class="editaddrfields">
			Address: <input type="text" name="foraddr" id="editfor" maxlength="10" size="10" />
			<input type="checkbox" name="oneshot" />One Shot 
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditfor');">Change</button>
	</div>


	<!-- Edit for counters. -->
	<div id="addreditcounter" class="editaddrhide">
		<form name="addreditcounter" class="editaddrfields">
			 Counter: <input type="text" name="counteraddr" id="editcounteraddr" maxlength="10" size="10" />
			 Preset: <input type="text" name="counterpreset" id="editcounterpreset" maxlength="10" size="10" />
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditcounter');">Change</button>
	</div>

	<!-- Edit for timers. -->
	<div id="addredittimer" class="editaddrhide">
		<form name="addredittimer" class="editaddrfields">
			Timer: <input type="text" name="timeraddr" id="edittimeraddr" maxlength="10" size="10" />
			Preset: <input type="text" name="timerpreset" id="edittimerpreset" maxlength="10" size="10" />
			 <input type="radio" name="timebase" value="ms" />ms
			 <input type="radio" name="timebase" value="sec" />sec
			 <input type="radio" name="timebase" value="min" />min
			 <input type="radio" name="timebase" value="hour" />hour
			 <input type="radio" name="timebase" value="day" />day
	</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addredittimer');">Change</button>
	</div>


	<!-- Edit for COPY. -->
	<div id="addreditcopy" class="editaddrhide">
		<form name="addreditcopy" class="editaddrfields">
			Source: <input type="text" name="sourceaddr" id="editcopy1a" maxlength="10" size="10" />
			Dest: <input type="text" name="destaddr" id="editcopy1b" maxlength="10" size="10" />
			 <input type="checkbox" name="oneshot" />One Shot
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditcopy');">Change</button>
	</div>


	<!-- Edit for Copy Block. CPYBLK. -->
	<div id="addreditcpyblk" class="editaddrhide">
		<form name="addreditcpyblk" class="editaddrfields">
			Source Start: <input type="text" name="sourcestartaddr" id="editcpyblk1a" maxlength="10" size="10" />
			Source End: <input type="text" name="sourceendaddr" id="editcpyblk1b" maxlength="10" size="10" />
			Dest: <input type="text" name="destaddr" id="editcpyblk1c" maxlength="10" size="10" />
			 <input type="checkbox" name="oneshot" />One Shot
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditcpyblk');">Change</button>
	</div>


	<!-- Edit for Copy Fill. FILL. -->
	<div id="addreditfill" class="editaddrhide">
		<form name="addreditfill" class="editaddrfields">
			Source: <input type="text" name="sourceaddr" id="editfill1a" maxlength="10" size="10" />
			Dest Start: <input type="text" name="deststartaddr" id="editfill1b" maxlength="10" size="10" />
			Dest End: <input type="text" name="destendaddr" id="editfill1c" maxlength="10" size="10" />
			 <input type="checkbox" name="oneshot" />One Shot
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditfill');">Change</button>
	</div>


	<!-- Edit for Copy Pack. PACK. -->
	<div id="addreditpack" class="editaddrhide">
		<form name="addreditpack" class="editaddrfields">
			Source Start: <input type="text" name="sourcestartaddr" id="editpack1a" maxlength="10" size="10" />
			Source End: <input type="text" name="sourceendaddr" id="editpack1b" maxlength="10" size="10" />
			Dest: <input type="text" name="destaddr" id="editpack1c" maxlength="10" size="10" />
			 <input type="checkbox" name="oneshot" />One Shot
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditpack');">Change</button>
	</div>


	<!-- Edit for Copy Unpack. UNPACK. -->
	<div id="addreditunpack" class="editaddrhide">
		<form name="addreditunpack" class="editaddrfields">
			Source: <input type="text" name="sourceaddr" id="editunpack1a" maxlength="10" size="10" />
			Dest Start: <input type="text" name="deststartaddr" id="editunpack1b" maxlength="10" size="10" />
			Dest End: <input type="text" name="destendaddr" id="editunpack1c" maxlength="10" size="10" />
			 <input type="checkbox" name="oneshot" />One Shot
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditunpack');">Change</button>
	</div>


	<!-- Edit for all find (search) instructions. FIND*. -->
	<div id="addreditfind" class="editaddrhide">
		<form name="addreditfind" class="editaddrfields">
			Search For: <input type="text" name="searchvalue" id="editfind1a" maxlength="10" size="10" />
			Source Start: <input type="text" name="sourcestartaddr" id="editfind1b" maxlength="10" size="10" />
			Source End: <input type="text" name="sourceendaddr" id="editfind1c" maxlength="10" size="10" />
			<br></br>
			Result Register: <input type="text" name="resultreg" id="editfind1d" maxlength="10" size="10" />
			Result Flag: <input type="text" name="resultflag" id="editfind1e" maxlength="10" size="10" />
			<input type="checkbox" name="oneshot" />One Shot
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditfind');">Change</button>
	</div>


	<!-- Edit for math decimal and hex instructions. MATHDEC, MATHHEX. -->
	<div id="addreditmath" class="editaddrhide">
		<form name="addreditmath" class="editaddrfields">
			Destination Reg: <input type="text" name="destaddr" id="editmathdest" maxlength="10" size="10" />
			Equation: <input type="text" name="equation" id="editmathequ" maxlength="35" size="35" />
			<input type="checkbox" name="oneshot" />One Shot
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditmath');">Change</button>
	</div>


	<!-- Edit for math sum instruction. SUM. -->
	<div id="addreditsum" class="editaddrhide">
		<form name="addreditsum" class="editaddrfields">
			Destination Reg: <input type="text" name="destaddr" id="editsum1a" maxlength="10" size="10" />
			Source Start: <input type="text" name="sourcestartaddr" id="editsum1b" maxlength="10" size="10" />
			Source End: <input type="text" name="sourceendaddr" id="editsum1c" maxlength="10" size="10" />
			<input type="checkbox" name="oneshot" />One Shot
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditsum');">Change</button>
	</div>


	<!-- Edit for shift register instruction. SHFRG. -->
	<div id="addreditshfrg" class="editaddrhide">
		<form name="addreditshfrg" class="editaddrfields">
			Source Start: <input type="text" name="sourcestartaddr" id="editshfrg1a" maxlength="10" size="10" />
			Source End: <input type="text" name="sourceendaddr" id="editshfrg1b" maxlength="10" size="10" />
		</form>
		<button class="editaddrfields" 
					onclick="LadEditor.AddressEnter('addreditshfrg');">Change</button>
	</div>

</div>


	<!-- ################################################################ -->

	<!-- SVG Template Container for Static Ladder Display -->
	<!-- This is the outer SVG container that gets cloned for each rung -->
	<svg id="svgcontainer" xmlns="http://www.w3.org/2000/svg" 
		xmlns:html="http://www.w3.org/1999/xhtml"
		xmlns:xlink="http://www.w3.org/1999/xlink"
		version="1.1" baseProfile="full" 
		width="1000px" height="200px"
		viewBox="0 0 1000 200"
		preserveAspectRatio="xMidYMid meet">
		<!-- Will have laddercontainer appended by JavaScript -->
	</svg>
	
	<!-- Templates container for ladder and rail elements -->
	<svg xmlns="http://www.w3.org/2000/svg" 
		xmlns:xlink="http://www.w3.org/1999/xlink"
		version="1.1" baseProfile="full" width="0px" height="0px"
		style="display:none;">
		
		<!-- This is a separate template for the ladder container to give a display offset -->
		<g id="laddercontainer" transform="translate(0,50)">
		</g>
		
		<!-- Power rail templates (separate so they can be cloned) -->
		<!-- Join inputs to outputs (first rail) -->
		<line id="svginprail" x1="610" y1="0px" x2="610" y2="0px" stroke="black" stroke-width="2px" />
		<!-- Join inputs to outputs (second optional rail) -->
		<line id="svginprail2" x1="610" y1="75px" x2="610" y2="75px" stroke="black" stroke-width="2px" />
		<!-- Join inputs to outputs (third optional rail) -->
		<line id="svginprail3" x1="610" y1="150px" x2="610" y2="150px" stroke="black" stroke-width="2px" />
		
		<!-- Joining rail for outputs -->
		<line id="svgoutprail" x1="610" y1="0px" x2="610" y2="0px" stroke="black" stroke-width="2px" />
		
		<!-- Decoration for output rail (small circle) -->
		<circle id="svgoutpraildec" cx="610px" cy="0px" r="3px" stroke-width="2px" fill="black" />
	</svg>

	<!-- This is a container for holding a complete rung of SVG (for editing) -->
	<svg id="ladderdispprototype" xmlns="http://www.w3.org/2000/svg" 
		xmlns:html="http://www.w3.org/1999/xhtml"
		xmlns:xlink="http://www.w3.org/1999/xlink"
		version="1.1" baseProfile="full" width="1000px" height="0px">
	

	</svg>



	<!-- ################################################################ -->

</div>	<!-- ladderprototypes -->

	<!-- ################################################################ -->


</body>

<!-- This is the code for editing the page - moved to be called AFTER page initialization -->

	<script>
	<![CDATA[

	// Define global SubrData and SubrControl so they can be used throughout the page
	var SubrData = null;
	var SubrControl = null;

	// Initialize the editing controller AFTER page load (called from MBEdit_pageinit)
	function InitializeEditingController() {
		// The subroutine data handler.
		SubrData = new LadSubrData();
		// Import the ladder data from the API into SubrData
		SubrData.ImportData(rungdata);

		// Initialise the master edit controller using the already-initialized global symbols
		SubrControl = new SubrDispControl(document, {
			LadSymbols: window.LadSymbols,
			subroutinename: document.getElementById('subroutinename'),
			subrcomments: document.getElementById('subrcomments'),
			svgcontainer: document.getElementById('svgcontainer'),
			laddercontainer: document.getElementById('laddercontainer'),
			staticladderlist: document.getElementById('staticrunglist'),
			svginprail: document.getElementById('svginprail'),
			svginprail2: document.getElementById('svginprail2'),
			svginprail3: document.getElementById('svginprail3'),
			svgoutprail: document.getElementById('svgoutprail'),
			svgoutpraildec: document.getElementById('svgoutpraildec'),
			MatrixParams: window.MatrixParams,
			RungHeightPad: window.RungHeightPad
		});
		
		try {
			// Render the static rungs using SubrControl
			if (rungdata && rungdata.rungdata && Array.isArray(rungdata.rungdata)) {
				console.log('Rendering ' + rungdata.rungdata.length + ' rungs via SubrControl');
				
				var rungList = document.getElementById('staticrunglist');
				var successCount = 0;
				var errorCount = 0;
				
				rungdata.rungdata.forEach(function(rung, index) {
					try {
						if (index < 3 || index === rungdata.rungdata.length - 1) {
							console.log('Rendering rung ' + index + ', type: ' + rung.rungtype + ', cells: ' + Object.keys(rung.matrixdata).length);
						}
						// Use CreateSingleRung instead of CreateStaticRung to get full HTML with rung numbers
						SubrControl.CreateSingleRung(rung, index, false, 0);
					} catch (e) {
						console.error('Error displaying rung ' + index + ':', e.message);
						console.error('Stack:', e.stack);
						errorCount++;
					}
				});
				console.log('Rendering complete: ' + successCount + ' success, ' + errorCount + ' errors');
				console.log('Total rungs appended:', rungList.children.length);
			}
			
			console.log('Editing controller initialized successfully');
			
			// Initialize editing features now that SubrData is ready
			InitializeEditingFeatures();
		} catch (e) {
			console.error('Error in rendering:', e.message);
			console.error('Stack:', e.stack);
			throw e;
		}
	}

	// Editing of overall subroutine features - initialized only if editing mode is enabled
	var SubrEdit = null;
	var CurrentRung = null;
	
	// Function to initialize editing features (called after InitializeEditingController)
	function InitializeEditingFeatures() {
		if (SubrData) {
			SubrEdit = new SubrEditLib(document, SubrData.GetSubrData());
		}
	}


	// Enter the new subroutine comments which the user has
	// entered. (Comments at the top of the subroutine). 
	function SubrCommentEnter() {
		// The user has entered the comments.
		var comments = SubrEdit.SubrCommentEnter();
		// Save the new comments.
		SubrData.SetSubroutineComments(comments);
	}

	// Enable the rung editing functions for the selected rung.
	function RungEdit(rung) {

		// If we are already editing another rung, then ignore this request.
		if (CurrentRung) {
			return;
		}
		// Hide the current static rung display.
		SubrControl.HideStaticRung(rung);

		// Remember the current static rung.
		CurrentRung = rung;

		// Ladder editor. This needs to be a global variable so it
		// can be called by other editing functions.
	 	// Use the full LadSymbolsInstance which has all required properties for LadderEditor
 	LadEditor = new LadderEditor(document, window.LadSymbolsInstance, rung, SubrData.GetRungData(rung));
		// Editor initialisation.
	 	LadEditor.InitEditRung();

	}

	// Done editing rung - Save the current rung we are editing.
	function RungDoneEdit(rungref) {
		// Save the rung data, comment, and rung type.
		if (LadEditor) {
			SubrData.SetRungMatrix(LadEditor.GetMatrixData(), rungref);
			SubrData.SetRungComment(LadEditor.GetComment(), rungref);
			SubrData.SetRungType(LadEditor.GetRungType(), rungref);
		}

		// Remove the current edit matrix (if it exists).
		if (CurrentRung) {
			LadEditor.CloseRung();
			LadEditor = null;
		}
		CurrentRung = null;

		// Update the static rung.
		SubrControl.ReplaceStaticRung(SubrData.GetRungData(rungref), rungref);
		// Show the static rung.
		SubrControl.ShowStaticRung(rungref);

	}


	// Cancell editing of the current rung.
	function CancelEdit(rungref) {

		// Remove the current edit matrix (if it exists).
		if (CurrentRung) {
			// Restore the original comment.
			LadEditor.RestoreComment();
			// Close the rung.
			LadEditor.CloseRung();
			LadEditor = null;
		}
		CurrentRung = null;

		// Show the static rung.
		SubrControl.ShowStaticRung(rungref);
	}

 
	// Clear the existing rung data.	TODO: Do we need this parameter?
	function RungClear(rung) {
  
		// Clear the current edit matrix (if it exists).
		if (CurrentRung) {
			LadEditor.ClearRung();
		}
	}

 
	// Delete an existing rung completely.
	function RungDelete(rungref) {
		if (CurrentRung) {
			// Close the rung display.
			LadEditor.CloseRung();
			// Delete the rung display.
			SubrControl.DeleteRung(rungref);
			// Delete the actual rung data.
			SubrData.DeleteRungRecord(rungref);
			CurrentRung = null;

			// Renumber all the rungs.
			var rungnumberlist = SubrData.GetRungRefList();
			SubrControl.RenumberStaticRungs(rungnumberlist);
		}
	}


	// Append a new rung to the end.
	function RungAppend() {
		// Append an empty record to the end of the data.
		SubrData.AppendEmptyRungRecord();
		// Append a new rung to the display.
		var nextrung = SubrData.CalcMaxRungIndex();
		var rungref = SubrData.GetRungReference(nextrung);
		SubrControl.AppendStaticRung(SubrData.GetRungData(rungref), nextrung);
	}


	// Insert a rung above.
	function RungInsert(rungref) {
		// If we are already editing a rung, then ignore this request.
		if (CurrentRung) {
			return;
		}

		// Insert the new rung.
		var newrungref = SubrData.InsertEmptyRungRecord(rungref);
		var newrungnumber = SubrData.FindRungNumber(newrungref);
		SubrControl.InsertStaticRung(SubrData.GetRungData(newrungref), 
							newrungnumber, rungref);

		// Renumber all the rungs.
		var rungnumberlist = SubrData.GetRungRefList();
		SubrControl.RenumberStaticRungs(rungnumberlist);
	}


	// Start up and initialisation - moved to earlier in the page



	//]]>
	</script>


</html>


<!-- Copyright 2008 - 2010. Michael Griffin 
This file is part of MBLogic.
MBLogic is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.
MBLogic is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the 
GNU General Public License for more details.
You should have received a copy of the GNU General Public License 
along with MBLogic. If not, see <http://www.gnu.org/licenses/>. 
-->
